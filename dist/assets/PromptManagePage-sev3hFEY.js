import{j as e,r as u,M as G}from"./vendor-BEfqtVUe.js";import{B as x,D as R,a as K,L as O,I,b as Q,d as Y,e as Z,u as ee,F as te}from"./index-Cq3WAw90.js";import{b as se,a as f,u as ae,d as v}from"./state-DlvjQ27R.js";import{af as ne,ai as re,a3 as k,aj as le,J as ie,X as z,ak as ce,aa as oe,P as F,S as M}from"./lucide-react-NQr80gjg.js";import"./utils-DxjPgW5d.js";import"./ui-vendor-DQ8_5H5A.js";import"./router-24HdL0-o.js";const L=[{id:"general-optimization",title:"简历整体优化",content:"请帮我优化这份简历，使其更加专业和吸引人。重点关注：1. 工作经历的描述是否突出成果和量化数据；2. 技能部分是否与目标职位匹配；3. 整体结构和格式是否清晰易读。",tags:["通用","优化","专业"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"work-experience-enhancement",title:"工作经历强化",content:"请帮我优化工作经历部分，重点：1. 使用STAR方法（情况、任务、行动、结果）重新组织描述；2. 添加具体的量化指标和成果；3. 突出与目标职位相关的技能和经验；4. 使用更有力的动词开头。",tags:["工作经历","STAR方法","量化"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"skills-matching",title:"技能匹配优化",content:"基于目标职位要求，请帮我优化技能部分：1. 调整技能的排序，将最相关的放在前面；2. 补充可能遗漏的重要技能；3. 为每个技能添加熟练程度说明；4. 删除不相关或过时的技能。",tags:["技能","匹配","排序"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"project-showcase",title:"项目经历展示",content:"请帮我优化项目经历部分：1. 突出项目的技术难点和创新点；2. 量化项目成果和影响；3. 说明个人在项目中的具体贡献和角色；4. 选择最能体现能力的核心项目进行详细描述。",tags:["项目","技术","成果"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"ats-optimization",title:"ATS系统优化",content:"请帮我优化简历以通过ATS（应聘者跟踪系统）筛选：1. 确保关键词与职位描述匹配；2. 使用标准的简历格式和节标题；3. 避免使用图片、表格等复杂格式；4. 检查拼写和语法错误。",tags:["ATS","关键词","格式"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{id:"career-change",title:"转行简历优化",content:"针对转行求职，请帮我优化简历：1. 突出可转移的技能和经验；2. 重新包装工作经历，强调与目标行业相关的部分；3. 补充相关的学习经历和项目；4. 在个人总结中明确转行动机和优势。",tags:["转行","可转移技能","重新包装"],createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}],j=se("resume-prompts",L),de=f(null,(t,a,o)=>{const c=t(j),s=new Date().toISOString(),i={...o,id:Date.now().toString(),createdAt:s,updatedAt:s};a(j,[...c,i])}),me=f(null,(t,a,o)=>{const c=t(j),s=new Date().toISOString(),i=c.map(l=>l.id===o.id?{...o,createdAt:l.createdAt,updatedAt:s}:l);a(j,i)}),xe=f(null,(t,a,o)=>{const s=t(j).filter(i=>i.id!==o);a(j,s)}),he=f("");f(null,(t,a)=>{a(j,L)});const ge=({prompt:t,onEdit:a,onDelete:o,onCopy:c})=>{const s=l=>new Date(l).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"}),i=(l,m=120)=>l.length<=m?l:l.substring(0,m)+"...";return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"p-4 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate mb-1",children:t.title})}),e.jsxs("div",{className:"flex items-center space-x-1 ml-2",children:[e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>c(t.content),className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",title:"复制提示词",children:e.jsx(ne,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>a(t),className:"h-8 w-8 p-0 text-gray-400 hover:text-blue-600",title:"编辑",children:e.jsx(re,{className:"h-4 w-4"})}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>o(t.id),className:"h-8 w-8 p-0 text-gray-400 hover:text-red-600",title:"删除",children:e.jsx(k,{className:"h-4 w-4"})})]})]})}),e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4",children:i(t.content)}),t.tags.length>0&&e.jsxs("div",{className:"flex items-center space-x-1 mb-4",children:[e.jsx(le,{className:"h-3 w-3 text-gray-400"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.tags.map((l,m)=>e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-700",children:l},m))})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(ie,{className:"h-3 w-3"}),e.jsxs("span",{children:["创建: ",s(t.createdAt)]})]}),t.updatedAt!==t.createdAt&&e.jsxs("span",{children:["更新: ",s(t.updatedAt)]})]})]})]})},ue=({isOpen:t,onClose:a,onSave:o,prompt:c})=>{const[s,i]=u.useState({title:"",content:"",tags:[]}),[l,m]=u.useState(""),[h,b]=u.useState({});u.useEffect(()=>{i(c?{title:c.title,content:c.content,tags:c.tags}:{title:"",content:"",tags:[]}),m(""),b({})},[c,t]);const w=()=>{const n={};return s.title.trim()||(n.title="请输入提示词标题"),s.content.trim()||(n.content="请输入提示词内容"),b(n),Object.keys(n).length===0},N=n=>{n.preventDefault(),w()&&o({title:s.title.trim(),content:s.content.trim(),tags:s.tags})},y=()=>{const n=l.trim();n&&!s.tags.includes(n)&&(i(d=>({...d,tags:[...d.tags,n]})),m(""))},S=n=>{i(d=>({...d,tags:d.tags.filter(A=>A!==n)}))},D=n=>{n.key==="Enter"&&(n.preventDefault(),y())};return e.jsx(R,{open:t,onOpenChange:a,children:e.jsxs(K,{className:"max-w-2xl",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:c?"编辑提示词":"添加提示词"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:a,className:"h-8 w-8 p-0 text-gray-400 hover:text-gray-600",children:e.jsx(z,{className:"h-4 w-4"})})]}),e.jsxs("form",{onSubmit:N,className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx(O,{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"标题 *"}),e.jsx(I,{id:"title",type:"text",value:s.title,onChange:n=>i(d=>({...d,title:n.target.value})),placeholder:"输入提示词标题",className:h.title?"border-red-300 focus:border-red-500 focus:ring-red-500":""}),h.title&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.title})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"标签"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(I,{id:"tags",type:"text",value:l,onChange:n=>m(n.target.value),onKeyPress:D,placeholder:"输入标签并按回车添加",className:"flex-1"}),e.jsx(x,{type:"button",variant:"outline",size:"sm",onClick:y,disabled:!l.trim(),children:"添加"})]}),s.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:s.tags.map((n,d)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:[n,e.jsx("button",{type:"button",onClick:()=>S(n),className:"ml-1 text-blue-600 hover:text-blue-800",children:e.jsx(z,{className:"h-3 w-3"})})]},d))})]})]}),e.jsxs("div",{children:[e.jsx(O,{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"提示词内容 *"}),e.jsx("textarea",{id:"content",value:s.content,onChange:n=>i(d=>({...d,content:n.target.value})),placeholder:"输入提示词的具体内容...",rows:8,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none ${h.content?"border-red-300 focus:border-red-500 focus:ring-red-500":"border-gray-300"}`}),h.content&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.content})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 bg-gray-50",children:[e.jsx(x,{type:"button",variant:"outline",onClick:a,children:"取消"}),e.jsxs(x,{type:"button",onClick:N,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"}),"保存"]})]})]})})},pe=({isOpen:t,onClose:a,onConfirm:o,promptTitle:c})=>{const s=()=>{o(),a()};return e.jsx(R,{open:t,onOpenChange:a,children:e.jsxs(K,{className:"max-w-md",children:[e.jsx(Q,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(oe,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx(Y,{className:"text-lg font-semibold text-gray-900",children:"删除提示词"}),e.jsx(Z,{className:"text-sm text-gray-600",children:"此操作不可恢复"})]})]})}),e.jsx("div",{className:"py-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["确定要删除提示词 ",e.jsxs("span",{className:"font-medium text-gray-900",children:['"',c,'"']})," 吗？"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(k,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"警告"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"删除后，该提示词的所有数据将永久丢失，无法恢复。"})]})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(x,{variant:"outline",onClick:a,children:"取消"}),e.jsxs(x,{variant:"destructive",onClick:s,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(k,{className:"h-4 w-4 mr-1"}),"确认删除"]})]})]})})},Se=()=>{const t=ae(j),[a,o]=v(he),[c,s]=u.useState(!1),[i,l]=u.useState(null),[m,h]=u.useState({isOpen:!1,promptId:"",promptTitle:""}),[,b]=v(de),[,w]=v(me),[,N]=v(xe),{isVisible:y,message:S,variant:D,position:n,showSuccess:d,showError:A,hideMessage:_,autoClose:B,autoCloseDelay:U}=ee(),T=u.useMemo(()=>{const r=new G({fields:["title","content","tags"],storeFields:["id","title","content","tags","createdAt","updatedAt"],searchOptions:{boost:{title:3,tags:2,content:1},fuzzy:.2,prefix:!0}}),g=t.map(p=>({id:p.id,title:p.title,content:p.content,tags:p.tags||[]}));return r.addAll(g),r},[t]),C=u.useMemo(()=>{let r=t;if(a.trim())try{const g=T.search(a),p=new Set(g.map(P=>P.id));r=r.filter(P=>p.has(P.id))}catch(g){console.error("Search error:",g)}return r},[t,a,T]),V=r=>{o(r)},E=()=>{l(null),s(!0)},H=r=>{l(r),s(!0)},J=r=>{const g=t.find(p=>p.id===r);g&&h({isOpen:!0,promptId:r,promptTitle:g.title})},W=()=>{N(m.promptId),d("提示词删除成功"),h({isOpen:!1,promptId:"",promptTitle:""})},X=()=>{h({isOpen:!1,promptId:"",promptTitle:""})},$=async r=>{try{await navigator.clipboard.writeText(r),d("提示词已复制到剪贴板")}catch(g){console.error("复制失败:",g),A("复制失败，请手动复制")}},q=r=>{i?w({...r,id:i.id}):b(r),s(!1),l(null)};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"简历优化提示词管理"})}),e.jsxs(x,{onClick:E,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"添加提示词"]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6 relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(I,{placeholder:"搜索提示词标题、内容或标签...",value:a,onChange:r=>V(r.target.value),className:"pl-10"})]}),e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"text-sm text-gray-600",children:["共找到 ",C.length," 个提示词",a&&e.jsxs("span",{className:"ml-2",children:['搜索: "',e.jsx("span",{className:"font-medium",children:a}),'"']})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:C.map(r=>e.jsx(ge,{prompt:r,onEdit:H,onDelete:J,onCopy:$},r.id))}),C.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("div",{className:"text-gray-400 mb-4",children:[e.jsx(M,{className:"h-12 w-12 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium",children:"没有找到匹配的提示词"}),e.jsx("p",{className:"text-sm mt-2",children:a?"尝试调整搜索条件":"还没有添加任何提示词"})]}),!a&&e.jsxs(x,{onClick:E,className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(F,{className:"h-4 w-4 mr-2"}),"添加第一个提示词"]})]})]}),e.jsx(ue,{isOpen:c,onClose:()=>{s(!1),l(null)},onSave:q,prompt:i}),e.jsx(te,{isVisible:y,message:S,variant:D,position:n,onClose:_,autoClose:B,autoCloseDelay:U}),e.jsx(pe,{isOpen:m.isOpen,onClose:X,onConfirm:W,promptTitle:m.promptTitle})]})};export{Se as PromptManagePage};
