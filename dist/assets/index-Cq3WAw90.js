const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewPage-CHrgt7UQ.js","assets/vendor-BEfqtVUe.js","assets/utils-DxjPgW5d.js","assets/vendor-DZrYvFpI.css","assets/ui-vendor-DQ8_5H5A.js","assets/lucide-react-NQr80gjg.js","assets/state-DlvjQ27R.js","assets/router-24HdL0-o.js","assets/PromptManagePage-sev3hFEY.js","assets/SectionManagerPage-BKchy8Wo.js","assets/dnd-kit-DQgtQVn-.js","assets/select-BwaCunmu.js","assets/EditorPage-BFIes3sy.js"])))=>i.map(i=>d[i]);
import{r as p,j as e,M as Pe,u as se,m as xs}from"./vendor-BEfqtVUe.js";import{t as hs,a as Oe,b as xe}from"./utils-DxjPgW5d.js";import{S as ps,R as ze,O as Me,P as gs,C as Ee,a as fs,T as $e,D as Te,b as bs}from"./ui-vendor-DQ8_5H5A.js";import{a as j,b as _e,u as P,c as C,d as js,P as vs}from"./state-DlvjQ27R.js";import{M as Ns,F as L,X as V,S as Le,P as te,a as ws,U as Fe,b as Be,c as Ue,d as ys,H as Ss,C as Cs,B as Rs,e as ks,G as Ds,A as Is,T as As,R as Ps,f as Os,D as zs,g as Ms,h as Es,W as $s,i as Ts,j as _s,k as Ls,l as he,m as Fs,L as Bs,n as Us,I as Vs,Y as Hs,o as Gs,p as qs,q as Ws,r as Js,s as Qs,t as Ys,u as Ks,v as Zs,w as Xs,x as et,y as st,z as tt,E as at,J as nt,K as rt,N as lt,O as it,Q as ot,V as ct,Z as dt,_ as mt,$ as ut,a0 as ae,a1 as xt,a2 as ht,a3 as H,a4 as pt,a5 as gt,a6 as ft,a7 as bt,a8 as jt,a9 as vt,aa as ye,ab as Se,ac as Ce,ad as Re,ae as Nt,af as wt}from"./lucide-react-NQr80gjg.js";import{u as pe,H as yt,R as St,a as K}from"./router-24HdL0-o.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=s(r);fetch(r.href,l)}})();const Ct="modulepreload",Rt=function(t){return"/"+t},ke={},ne=function(a,s,n){let r=Promise.resolve();if(s&&s.length>0){let d=function(c){return Promise.all(c.map(m=>Promise.resolve(m).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");r=d(s.map(c=>{if(c=Rt(c),c in ke)return;ke[c]=!0;const m=c.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":Ct,m||(b.as="script"),b.crossOrigin="",b.href=c,o&&b.setAttribute("nonce",o),document.head.appendChild(b),m)return new Promise((h,v)=>{b.addEventListener("load",h),b.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return a().catch(l)})};function O(...t){return hs(Oe(t))}const kt=xe("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=p.forwardRef(({className:t,variant:a,size:s,asChild:n=!1,...r},l)=>{const i=n?ps:"button";return e.jsx(i,{className:O(kt({variant:a,size:s,className:t})),ref:l,...r})});f.displayName="Button";const $=p.forwardRef(({className:t,type:a,...s},n)=>e.jsx("input",{type:a,className:O("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background outline-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),ref:n,...s}));$.displayName="Input";const De=t=>{try{const a=JSON.stringify(t,null,2),s=new Blob([a],{type:"application/json"}),n=URL.createObjectURL(s),r=document.createElement("a");return r.href=n,r.download=`${t.title||"简历"}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),!0}catch(a){return console.error("导出简历失败:",a),!1}},Dt=t=>new Promise(a=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async n=>{const r=n.target.files?.[0];if(!r){a(null);return}try{const l=await r.text(),i=JSON.parse(l);if(!i.id||!i.title||!i.sections)throw new Error("无效的简历文件格式");a(i)}catch(l){console.error("导入简历失败:",l),t?.("导入失败：文件格式不正确或文件已损坏","error"),a(null)}},s.oncancel=()=>{a(null)},s.click()}),It=(t,a="简历合集")=>{try{const s=JSON.stringify(t,null,2),n=new Blob([s],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");return l.href=r,l.download=`${a}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r),!0}catch(s){return console.error("批量导出简历失败:",s),!1}},At=t=>new Promise(a=>{const s=document.createElement("input");s.type="file",s.accept=".json",s.onchange=async n=>{const r=n.target.files?.[0];if(!r){a(null);return}try{const l=await r.text(),i=JSON.parse(l);if(Array.isArray(i)){const o=i.filter(d=>d&&typeof d=="object"&&d.id&&d.title&&d.sections);if(o.length===0)throw new Error("没有找到有效的简历数据");a(o)}else if(i.id&&i.title&&i.sections)a([i]);else throw new Error("无效的文件格式")}catch(l){console.error("批量导入简历失败:",l),t?.("导入失败：文件格式不正确或文件已损坏","error"),a(null)}},s.oncancel=()=>{a(null)},s.click()}),ge={id:"1",title:"我的简历",template:"default",layout:"top-bottom",sections:[{id:"basic-info",title:"基本信息",iconName:"user",type:"basic",visible:!0,order:1,data:{avatar:"https://phzdoc.oss-cn-beijing.aliyuncs.com/uPic/avatar.JPG",name:"白玩",email:"example@gmail.com",phone:"12345678901",gender:"男",age:"24",location:"北京",website:"",customFields:[{id:"1",label:"7年工作经验",value:"",iconName:"briefcase"},{id:"2",label:"期望城市",value:"北京",iconName:"map-pin"},{id:"3",label:"个人网站",value:"https://whitemeta.cn",iconName:"globe"},{id:"4",label:"b站",value:"https://space.bilibili.com/107889531",iconName:"tv"},{id:"5",label:"清华大学",value:"",iconName:"graduation-cap"}]}},{id:"advantages",title:"个人优势",iconName:"star",type:"list",editorType:"text",visible:!0,order:2,data:{content:"<ol><li>熟练使用 <strong>HTML5</strong> + <strong>CSS3</strong> 技术</li><li>熟练掌握 <strong>JavaScript (ES6+)</strong> 和 <strong>Vue</strong> 技术栈，并深入了解其原理</li><li>丰富的大型网站开发经验，对前端工程化，性能优化有丰富的实战经验</li><li>熟练掌握 <strong>TypeScript</strong>，<strong>SCSS</strong></li><li>擅长 <strong>Webpack</strong> 配置与前端架构设计</li><li>熟悉 <strong>Node.js</strong>，包括 <strong>Express</strong>/<strong>Koa</strong> 等服务端框架</li></ol>"}},{id:"projects",title:"项目经历",iconName:"settings",type:"timeline",editorType:"timeline",visible:!0,order:3,data:[{description:'<p>一个基于 <strong>React 19</strong> 构建的现代化在线简历编辑器，提供所见即所得的编辑体验。</p><ul><li>为了更轻量、更容易定制，组件库选择了 <strong>Shadcn/UI</strong></li><li>构建工具选择了 <strong>Vite</strong> 并优化了首屏加载性能，总资源小于1MB</li><li>基于 <strong>Docker</strong> + <strong>GithubAction</strong> 实现全自动 CI/CD</li><li>这份项目是开源的，地址 <a href="https://github.com/WhiteP1ay/resumaker" target="_blank" rel="noopener noreferrer">https://github.com/WhiteP1ay/resumaker</a></li><li>这份简历就是通过这个编辑工具制作出来的</li></ul>',endDate:"2024-12",id:"1756977218779",secondarySubtitle:"resume.whitemeta.cn",startDate:"2024-01",subtitle:"全栈",title:"简历编辑器"},{id:"1757064171447",title:"个人网站",subtitle:"全栈",secondarySubtitle:"whitemeta.cn",startDate:"2023-06",endDate:"2024-12",description:'<p>一个基于 <strong>Next 15</strong> 构建的博客网站</p><ul><li>良好的SEO，Google搜索"whitemeta"，本站排名第一</li><li>基于 <strong>TailwindCSS</strong> 实现 PC & H5 双端适配</li><li>基于 <strong>Google Analytics</strong> 实现全站流量统计</li><li>当然博客网站最重要的还是内容，希望您能通过博文来更全面了解我</li></ul>'}]},{id:"experience",title:"工作经历",iconName:"briefcase",type:"timeline",editorType:"timeline",visible:!0,order:4,data:[{id:"1",title:"阿里巴巴",subtitle:"高级前端工程师",secondarySubtitle:"杭州",startDate:"2022-03",endDate:"2024-06",description:"负责核心业务前端开发，参与架构设计和技术选型。"},{id:"2",title:"字节跳动",subtitle:"前端工程师",secondarySubtitle:"北京",startDate:"2020-07",endDate:"2022-02",description:"参与多个大型项目开发，负责性能优化和用户体验提升。"}]}]},Pt={currentResumeId:"1",resumes:{1:ge},metadata:{1:{id:"1",title:"我的简历",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),description:"默认简历"}}},R=_e("resume-collection",Pt),me=j(t=>{const a=t(R);return a.resumes[a.currentResumeId]||Object.values(a.resumes)[0]},(t,a,s)=>{const n=t(R);a(R,{...n,resumes:{...n.resumes,[s.id]:s},metadata:{...n.metadata,[s.id]:{...n.metadata[s.id],updatedAt:new Date().toISOString()}}})}),Ot=j(null,(t,a,s)=>{const n=t(R);n.resumes[s]&&a(R,{...n,currentResumeId:s})}),zt=j(null,(t,a,s,n)=>{const r=t(R),l=Date.now().toString(),i=new Date().toISOString(),o={...ge,id:l,title:s},d={id:l,title:s,createdAt:i,updatedAt:i,description:n};return a(R,{...r,currentResumeId:l,resumes:{...r.resumes,[l]:o},metadata:{...r.metadata,[l]:d}}),l}),Mt=j(null,(t,a,s)=>{const n=t(R);if(Object.keys(n.resumes).length<=1)return!1;const{...r}=n.resumes,{...l}=n.metadata;r[s]&&(delete r[s],delete l[s]);let i=n.currentResumeId;return n.currentResumeId===s&&(i=Object.keys(r)[0]),a(R,{currentResumeId:i,resumes:r,metadata:l}),!0}),Et=j(null,(t,a,s,n,r)=>{const l=t(R);return l.resumes[s]?(a(R,{...l,resumes:{...l.resumes,[s]:{...l.resumes[s],title:n}},metadata:{...l.metadata,[s]:{...l.metadata[s],title:n,description:r,updatedAt:new Date().toISOString()}}}),!0):!1}),$t=j(null,(t,a,s,n)=>{const r=t(R),l=r.resumes[s];if(!l)return null;const i=Date.now().toString(),o=new Date().toISOString(),d=n||`${l.title} - 副本`,c={...l,id:i,title:d},m={id:i,title:d,createdAt:o,updatedAt:o,description:`${r.metadata[s]?.description||""} (副本)`};return a(R,{...r,currentResumeId:i,resumes:{...r.resumes,[i]:c},metadata:{...r.metadata,[i]:m}}),i}),Tt=j(null,(t,a,s,n)=>{const r=t(R),l=new Date().toISOString();let i=s.id;r.resumes[i]&&(i=Date.now().toString());const o={...s,id:i},d={id:i,title:s.title,createdAt:l,updatedAt:l,description:"导入的简历",...n};return a(R,{...r,currentResumeId:i,resumes:{...r.resumes,[i]:o},metadata:{...r.metadata,[i]:d}}),i}),_t=j(null,(t,a,s)=>{const n=t(R),r=new Date().toISOString(),l=[],i={...n.resumes},o={...n.metadata};for(const c of s){let m=c.id,g=1;for(;i[m];)m=`${c.id}_${g}`,g++;const b={...c,id:m},h={id:m,title:c.title,createdAt:r,updatedAt:r,description:"导入的简历"};i[m]=b,o[m]=h,l.push(m)}const d=l.length>0?l[0]:n.currentResumeId;return a(R,{...n,currentResumeId:d,resumes:i,metadata:o}),l}),Lt=j(t=>{const a=t(R);return Object.values(a.metadata).sort((s,n)=>new Date(n.updatedAt).getTime()-new Date(s.updatedAt).getTime())}),Ft=j(null,(t,a,s)=>{const n=t(R);if(s.length>=Object.keys(n.resumes).length)return!1;const r=s.filter(d=>n.resumes[d]);if(r.length===0)return!1;const l={...n.resumes},i={...n.metadata};r.forEach(d=>{delete l[d],delete i[d]});let o=n.currentResumeId;return r.includes(n.currentResumeId)&&(o=Object.keys(l)[0]),a(R,{currentResumeId:o,resumes:l,metadata:i}),!0}),Bt=j(t=>t(R).currentResumeId),re=()=>{const t=P(me),a=P(Bt),s=P(Lt),n=P(R),r=C(me),l=C(Ot),i=C(zt),o=C(Mt),d=C(Et),c=C($t),m=C(Tt),g=C(_t),b=C(Ft),h=p.useCallback(()=>De(t),[t]),v=p.useCallback(w=>{const N=n.resumes[w];return N?De(N):!1},[n.resumes]),u=p.useCallback(()=>{const w=Object.values(n.resumes);return It(w,"所有简历")},[n.resumes]),S=p.useCallback(async w=>{const N=await Dt(w);return N?m(N):null},[m]),k=p.useCallback(async w=>{const N=await At(w);return N&&N.length>0?g(N):[]},[g]),z=p.useCallback((w,N)=>i(w,N),[i]),M=p.useCallback(w=>o(w),[o]),F=p.useCallback(w=>b(w),[b]),y=p.useCallback((w,N,U)=>d(w,N,U),[d]),ee=p.useCallback((w,N)=>c(w,N),[c]),Q=p.useCallback(w=>{l(w)},[l]),Y=p.useCallback(w=>{r(w)},[r]),E=p.useCallback(w=>n.metadata[w],[n.metadata]),B=p.useCallback(w=>n.resumes[w],[n.resumes]);return{currentResume:t,currentResumeId:a,resumeList:s,totalCount:s.length,switchResume:Q,createResume:z,deleteResume:M,batchDeleteResumes:F,renameResume:y,duplicateResume:ee,updateCurrentResume:Y,exportCurrentResume:h,exportResume:v,exportAllResumes:u,importSingleResume:S,importBatchResumes:k,getResumeMetadata:E,getResumeData:B}},Ut=({isOpen:t,onClose:a})=>{const{resumeList:s,currentResumeId:n,switchResume:r,getResumeMetadata:l,createResume:i}=re(),[o,d]=p.useState(""),c=p.useMemo(()=>{const u=new Pe({fields:["title","description"],storeFields:["id","title","description"],searchOptions:{boost:{title:2},fuzzy:.2,prefix:!0}}),S=s.map(k=>({id:k.id,title:k.title,description:k.description||""}));return u.addAll(S),u},[s]),m=p.useMemo(()=>{if(!o.trim())return s;try{return c.search(o).map(k=>s.find(z=>z.id===k.id)).filter(k=>k!==void 0)}catch(u){return console.error("Search error:",u),s}},[o,s,c]),g=u=>{u!==n&&r(u),a()},b=()=>{i(`新简历 ${s.length+1}`,"简历描述"),a()},h=()=>{d("")},v=l(n);return t?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:a}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-lg z-50 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"简历列表"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2",children:e.jsx(V,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(L,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["当前: ",v?.title||"未知简历"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"搜索简历标题或内容...",value:o,onChange:u=>d(u.target.value),className:"pl-10 pr-10"}),o&&e.jsx(f,{variant:"ghost",size:"sm",onClick:h,className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-1 h-6 w-6",children:e.jsx(V,{className:"h-3 w-3"})})]}),e.jsxs(f,{onClick:b,className:"w-full mt-3 flex items-center space-x-2",size:"sm",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"新建简历"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:m.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:o?"未找到匹配的简历":"暂无简历"}):m.map(u=>e.jsxs("button",{className:`
                    w-full p-3 text-left rounded-lg transition-colors mb-2
                    flex items-start space-x-3
                    ${u.id===n?"bg-blue-50 border border-blue-200 text-blue-700":"border border-gray-200 text-gray-700 hover:bg-gray-50"}
                  `,onClick:()=>g(u.id),children:[e.jsx(L,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate mb-1",children:[u.title,u.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 px-2 py-0.5 rounded-full",children:"当前"})]}),u.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate",children:u.description}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(u.createdAt).toLocaleDateString()})]})]},u.id))})}),e.jsxs("div",{className:"p-3 border-t border-gray-200 text-xs text-gray-500 text-center",children:["共 ",s.length," 份简历",o&&m.length!==s.length&&e.jsxs("span",{className:"ml-2",children:["(",m.length," 匹配)"]})]})]})]}):null},Vt=({onOpenDrawer:t})=>{const{getResumeMetadata:a,currentResumeId:s}=re(),n=a(s);return e.jsxs(f,{variant:"outline",size:"sm",onClick:t,className:"flex items-center space-x-2",children:[e.jsx(Ns,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate max-w-[120px]",children:n?.title||"未知简历"})]})]})},Ht=({children:t})=>{const[a,s]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 mr-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(L,{className:"h-5 w-5 text-white"})}),e.jsx(ws,{className:"absolute -top-0.5 -right-0.5 h-3 w-3 text-yellow-400"})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"简历制作工具"}),e.jsx("p",{className:"text-xs text-gray-600",children:"创建专业的个人简历，展示最好的自己"})]})]}),e.jsx("div",{className:"block mr-3 lg:hidden",children:e.jsx(Vt,{onOpenDrawer:()=>s(!0)})}),e.jsx("div",{className:"flex items-center space-x-3",children:t})]})})}),e.jsx(Ut,{isOpen:a,onClose:()=>s(!1)})]})},Gt=xe("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),T=p.forwardRef(({className:t,...a},s)=>e.jsx(ze,{ref:s,className:O(Gt(),t),...a}));T.displayName=ze.displayName;const ue=[{name:"user",icon:Fe,label:"用户"},{name:"mail",icon:Be,label:"邮箱"},{name:"phone",icon:Ue,label:"电话"},{name:"map-pin",icon:ys,label:"位置"},{name:"home",icon:Ss,label:"家庭"},{name:"car",icon:Cs,label:"交通"},{name:"briefcase",icon:Rs,label:"工作"},{name:"building",icon:ks,label:"公司"},{name:"graduation-cap",icon:Ds,label:"教育"},{name:"award",icon:Is,label:"奖项"},{name:"trophy",icon:As,label:"成就"},{name:"rocket",icon:Ps,label:"创业"},{name:"code",icon:Os,label:"编程"},{name:"database",icon:zs,label:"数据库"},{name:"cloud",icon:Ms,label:"云计算"},{name:"cpu",icon:Es,label:"硬件"},{name:"wifi",icon:$s,label:"网络"},{name:"shield",icon:Ts,label:"安全"},{name:"monitor",icon:_s,label:"前端"},{name:"smartphone",icon:Ls,label:"移动端"},{name:"settings",icon:he,label:"运维"},{name:"github",icon:Fs,label:"GitHub"},{name:"linkedin",icon:Bs,label:"LinkedIn"},{name:"twitter",icon:Us,label:"Twitter"},{name:"instagram",icon:Vs,label:"Instagram"},{name:"youtube",icon:Hs,label:"YouTube"},{name:"facebook",icon:Gs,label:"Facebook"},{name:"message-circle",icon:qs,label:"微信"},{name:"link",icon:Ws,label:"链接"},{name:"tv",icon:Js,label:"电视"},{name:"camera",icon:Qs,label:"摄影"},{name:"music",icon:Ys,label:"音乐"},{name:"headphones",icon:Ks,label:"音响"},{name:"palette",icon:Zs,label:"设计"},{name:"gamepad-2",icon:Xs,label:"游戏"},{name:"plane",icon:et,label:"旅行"},{name:"book",icon:st,label:"阅读"},{name:"coffee",icon:tt,label:"咖啡"},{name:"globe",icon:at,label:"网站"},{name:"calendar",icon:nt,label:"时间"},{name:"file-text",icon:L,label:"文档"},{name:"shopping-bag",icon:rt,label:"购物"},{name:"credit-card",icon:lt,label:"金融"},{name:"star",icon:it,label:"收藏"},{name:"heart",icon:ot,label:"喜欢"},{name:"target",icon:ct,label:"目标"},{name:"zap",icon:dt,label:"能量"},{name:"folder",icon:mt,label:"文件夹"},{name:"briefcase-business",icon:ut,label:"商务"}],Ie=({value:t,onChange:a,label:s="图标"})=>{const[n,r]=p.useState(!1),l=ue.find(i=>i.name===t);return e.jsxs("div",{className:"space-y-2",children:[s&&e.jsx(T,{className:"text-sm font-medium text-gray-700",children:s}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>r(!n),className:"w-full justify-start h-10",children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.icon,{className:"h-4 w-4"}),e.jsx("span",{children:l.label})]}):e.jsx("span",{className:"text-gray-500",children:"选择图标"})}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-6 gap-1 p-3",children:ue.map(i=>e.jsxs("button",{type:"button",onClick:()=>{a(i.name),r(!1)},className:`flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-100 transition-colors text-xs ${t===i.name?"bg-blue-50 text-blue-600":"text-gray-600"}`,title:i.label,children:[e.jsx(i.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate text-[10px] leading-tight",children:i.label})]},i.name))})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},le=({iconName:t,className:a})=>{const s=ue.find(n=>n.name===t)?.icon;return s?e.jsx(s,{className:a}):null},A=me,qt=j(null,(t,a)=>{const s=t(A);a(A,{...ge,id:s.id,title:s.title})}),Wt=j(null,(t,a,s)=>{const n=t(A),r=n.sections.map(l=>l.id===s.sectionId?{...l,data:s.data,...s.iconName!==void 0&&{iconName:s.iconName,icon:s.iconName},...s.dateFormat!==void 0&&{dateFormat:s.dateFormat}}:l);a(A,{...n,sections:r})}),Jt=j(null,(t,a,s)=>{const n=t(A),r=n.sections.map(l=>l.id===s.sectionId?{...l,...s.props}:l);a(A,{...n,sections:r})}),Qt=j(null,(t,a,s)=>{const n=t(A),r=n.sections.find(i=>i.type==="basic"),l=r?[r,...s]:s;a(A,{...n,sections:l})}),Yt=j(null,(t,a,s)=>{const n=t(A);a(A,{...n,sections:[...n.sections,s]})}),Kt=j(null,(t,a,s)=>{const n=t(A),r=n.sections.filter(l=>l.id!==s);a(A,{...n,sections:r})}),Zt=j(t=>a=>t(A).sections.find(n=>n.id===a)),Xt=j(t=>t(A).sections.filter(s=>s.type!=="basic").sort((s,n)=>s.order-n.order)),ea=j(t=>t(A).sections.find(s=>s.type==="basic")),sa=()=>{const t=C(Wt),a=C(Jt),s=C(Qt),n=C(Yt),r=C(Kt),l=P(Zt),i=P(Xt),o=P(ea);return{updateSection:(h,v,u,S)=>{t({sectionId:h,data:v,iconName:u,dateFormat:S})},updateSectionIcon:(h,v)=>{a({sectionId:h,props:{iconName:v}})},updateSectionTitle:(h,v)=>{a({sectionId:h,props:{title:v}})},updateSectionEditorType:(h,v)=>{a({sectionId:h,props:{editorType:v}})},toggleSectionVisibility:h=>{const v=l(h);v&&a({sectionId:h,props:{visible:!v.visible}})},updateSectionsOrder:s,addSection:n,deleteSection:r,getSection:l,getNonBasicSections:i,getBasicSection:o}},Ve=t=>{const{updateSection:a}=sa();return{handleTimelineSave:(i,o,d)=>{a(t,i,o,d)},handleListSave:(i,o)=>{a(t,i,o)},handleTextSave:(i,o)=>{a(t,i,o)},handleBasicInfoSave:i=>{a(t,i)}}},ta=t=>{const[a,s]=p.useState(!1),{handleBasicInfoSave:n}=Ve(t);return{isEditing:a,startEditing:()=>{s(!0)},closeEditing:()=>{s(!1)},handleSave:m=>{n(m)},formatGenderAge:(m,g)=>m&&g?`${m} | ${g}岁`:m||(g?`${g}岁`:""),formatCustomFields:m=>!m||m.length===0?"":m.map(g=>e.jsxs("span",{className:"flex items-center gap-1",children:[g.iconName&&e.jsx(le,{iconName:g.iconName,className:"w-4 h-4"}),g.label," ",g.value]},g.id)),hasValue:m=>m&&m.trim()!==""}},aa={sm:"w-16 h-20 print:w-14 print:h-18",md:"w-24 h-32 print:w-20 print:h-28",lg:"w-32 h-40 print:w-28 print:h-36"},na=({src:t,alt:a="头像",size:s="md",className:n=""})=>e.jsx(e.Fragment,{children:t&&e.jsx("div",{className:Oe(`${aa[s]} rounded-lg overflow-hidden ${n}`,"bg-gray-200 border border-gray-300"),children:e.jsx("img",{src:t,alt:a,className:"w-full h-full object-cover"})})}),de=({icon:t,children:a,className:s=""})=>e.jsxs("div",{className:`flex items-center space-x-1 ${s}`,children:[e.jsx(t,{className:"h-4 w-4 print:h-3 print:w-3"}),e.jsx("span",{children:a})]}),ra=({section:t,isEditable:a})=>{const s=t.data,n=pe(),{formatGenderAge:r,formatCustomFields:l,hasValue:i}=ta(t.id),o=()=>{n(`/editor/basic-info/${t.id}`)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[a&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:o,children:e.jsx(ae,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 pr-6 flex flex-col items-center px-[3rem]",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 print:mb-2",children:s.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600 print:gap-x-4",children:[(s.gender||s.age)&&e.jsx(de,{icon:Fe,children:r(s.gender,s.age)}),i(s.phone)&&e.jsx(de,{icon:Ue,children:s.phone}),i(s.email)&&e.jsx(de,{icon:Be,children:s.email})]}),s.customFields&&s.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600 mt-2 print:mt-1",children:l(s.customFields)})]}),e.jsx("div",{className:"shrink-0 hidden md:block print:block",children:e.jsx(na,{src:s.avatar,alt:s.name||"头像",size:"md"})})]})]})})},la=[{value:"zh-full",label:"xxxx年xx月xx日 (2024年01月15日)",hasDay:!0},{value:"zh-month",label:"xxxx年xx月 (2024年01月)",hasDay:!1},{value:"dash-full",label:"xxxx-xx-xx (2024-01-15)",hasDay:!0},{value:"dash-month",label:"xxxx-xx (2024-01)",hasDay:!1},{value:"dot-full",label:"xxxx.xx.xx (2024.01.15)",hasDay:!0},{value:"dot-month",label:"xxxx.xx (2024.01)",hasDay:!1}],ia=t=>{if(!t)return{year:"",month:"",day:""};const a=t.split("-");return{year:a[0]||"",month:a[1]||"",day:a[2]||"01"}},Ya=(t,a,s,n)=>{if(!t||!a)return"";const r=a.padStart(2,"0"),l=s.padStart(2,"0");return n&&s?`${t}-${r}-${l}`:`${t}-${r}`},Ae=(t,a)=>{if(!t)return"";const s=ia(t);if(!s.year||!s.month)return"";const n=la.find(o=>o.value===a),r=s.year,l=s.month.padStart(2,"0"),i=s.day.padStart(2,"0");switch(a){case"zh-full":return`${r}年${l}月${i}日`;case"zh-month":return`${r}年${l}月`;case"dash-full":return`${r}-${l}-${i}`;case"dash-month":return`${r}-${l}`;case"dot-full":return`${r}.${l}.${i}`;case"dot-month":return`${r}.${l}`;default:return n?.hasDay?`${r}-${l}-${i}`:`${r}-${l}`}},Ka=t=>{if(!t)return"";if(/^\d{4}-\d{2}(-\d{2})?$/.test(t))return t;try{if(/\d{4}年\d{2}月(\d{2}日)?/.test(t)){const s=t.match(/(\d{4})年(\d{2})月(\d{2})?日?/);if(s){const[,n,r,l]=s;return new Date(parseInt(n),parseInt(r)-1,parseInt(l)||1).toISOString().slice(0,10)}}if(/\d{4}\.\d{2}(\.\d{2})?/.test(t)){const s=t.match(/(\d{4})\.(\d{2})(?:\.(\d{2}))?/);if(s){const[,n,r,l]=s;return new Date(parseInt(n),parseInt(r)-1,parseInt(l)||1).toISOString().slice(0,10)}}const a=new Date(t);return isNaN(a.getTime())?t:a.toISOString().slice(0,10)}catch{return t}},Za=t=>t.length<=4&&/^\d*$/.test(t),Xa=t=>t.length<=2&&/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=12),en=t=>t.length<=2&&/^\d*$/.test(t)&&(t===""||parseInt(t)>=1&&parseInt(t)<=31),oa=({data:t})=>e.jsx("div",{className:"space-y-1 print:space-y-1",children:t.map((a,s)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium mt-0.5 shrink-0",children:[s+1,"."]}),e.jsx("span",{className:"text-sm text-gray-700 leading-relaxed [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:a.content}})]},a.id))}),ca=({data:t,dateFormat:a})=>e.jsx("div",{className:"space-y-4 print:space-y-3",children:t.map(s=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 print:mb-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1 print:mb-0.5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 print:text-sm",children:s.title}),e.jsx("span",{className:"text-sm text-gray-600",children:s.subtitle})]}),s.secondarySubtitle&&e.jsx("div",{className:"text-sm text-gray-700 font-medium",children:s.secondarySubtitle})]}),(s.startDate||s.endDate)&&e.jsxs("div",{className:"text-sm text-gray-600 ml-4 shrink-0",children:[Ae(s.startDate||"",a||"dash-month")," ",s.startDate&&s.endDate&&"-"," ",Ae(s.endDate||"",a||"dash-month")]})]}),s.description&&e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line pl-0 mt-2 print:mt-1 [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:s.description}})]},s.id))}),da=({data:t})=>e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:t.content}}),ma=t=>{const[a,s]=p.useState(!1),{handleTimelineSave:n,handleListSave:r,handleTextSave:l}=Ve(t.id),i=()=>t.editorType||"timeline",o=()=>{s(!0)},d=()=>{s(!1)},c=(g,b)=>{const h=i();h==="timeline"?n(g,b):h==="list"?r(g,b):l(g,b)},m=()=>{const g=i(),b={isOpen:a,onClose:d,onSave:c,title:t.title,currentIcon:t.iconName||"briefcase"};return g==="timeline"?{...b,initialData:t.data}:g==="list"?{...b,initialData:t.data}:{...b,initialData:t.data}};return{isEditing:a,editorType:i(),startEditing:o,closeEditing:d,handleSave:c,getEditorProps:m}},ua=({section:t,isEditable:a})=>{const{editorType:s}=ma(t),n=pe(),r=()=>{n(`/editor/${s}/${t.id}`)},l=()=>s==="list"?e.jsx(oa,{data:t.data}):s==="text"?e.jsx(da,{data:t.data}):e.jsx(ca,{data:t.data,dateFormat:t.dateFormat});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative group",children:[a&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-[.5rem] right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-10",onClick:r,children:e.jsx(ae,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"mb-6 print:mb-6",children:[e.jsxs("div",{className:"flex items-center pb-[.5rem] border-b-gray-400 border-b-[1px]",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t.title}),t.iconName&&e.jsx("div",{className:"p-2",children:e.jsx(le,{iconName:t.iconName,className:"h-4 w-4 print:h-3 print:w-3"})})]}),e.jsx("div",{className:"mt-[.5rem]",children:l()})]})]})})},xa=({resume:t,isEditable:a=!1,scale:s=100,className:n=""})=>{const r=()=>t.sections.find(d=>d.type==="basic"),l=()=>t.sections.filter(d=>d.type==="timeline"||d.type==="list"||d.type==="text"),i=r(),o=l().filter(d=>d.visible).sort((d,c)=>d.order-c.order);return e.jsx("div",{className:`print-container ${n}`,children:e.jsxs("div",{className:"max-w-4xl mx-auto bg-white shadow-lg print:shadow-none print:max-w-none",style:{transform:`scale(${s/100})`,transformOrigin:"top center",transition:"transform 0.2s ease-in-out"},children:[i&&e.jsx(ra,{section:i,isEditable:a}),e.jsx("div",{className:"px-8 pb-8 print:px-6 print:pb-6",children:e.jsx("div",{className:"space-y-6 print:space-y-4",children:o.map(d=>e.jsx(ua,{section:d,isEditable:a},d.id))})})]})})},ha=({isCollapsed:t,onToggleCollapse:a})=>{const{resumeList:s,currentResumeId:n,switchResume:r,createResume:l}=re(),[i,o]=p.useState(""),d=p.useMemo(()=>{const h=new Pe({fields:["title","description"],storeFields:["id","title","description"],searchOptions:{boost:{title:2},fuzzy:.2,prefix:!0}}),v=s.map(u=>({id:u.id,title:u.title,description:u.description||""}));return h.addAll(v),h},[s]),c=p.useMemo(()=>{if(!i.trim())return s;try{return d.search(i).map(u=>s.find(S=>S.id===u.id)).filter(u=>u!==void 0)}catch(h){return console.error("Search error:",h),s}},[i,s,d]),m=h=>{h!==n&&r(h)},g=()=>{l(`新简历 ${s.length+1}`,"简历描述")},b=()=>{o("")};return t?e.jsxs("div",{className:"w-12 bg-white border-r border-gray-200 flex flex-col items-center py-4",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2 mb-4",children:e.jsx(xt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[s.slice(0,3).map(h=>e.jsx(f,{variant:h.id===n?"default":"ghost",size:"sm",onClick:()=>m(h.id),className:"p-2 w-8 h-8",title:h.title,children:e.jsx(L,{className:"h-4 w-4"})},h.id)),s.length>3&&e.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["+",s.length-3]})]})]}):e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"简历列表"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2",children:e.jsx(ht,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Le,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"搜索简历标题或内容...",value:i,onChange:h=>o(h.target.value),className:"pl-10 pr-10"}),i&&e.jsx(f,{variant:"ghost",size:"sm",onClick:b,className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-1 h-6 w-6",children:e.jsx(V,{className:"h-3 w-3"})})]}),e.jsxs(f,{onClick:g,className:"w-full mt-3 flex items-center space-x-2",size:"sm",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"新建简历"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:i?"未找到匹配的简历":"暂无简历"}):c.map(h=>e.jsxs("button",{className:`
                  w-full p-3 text-left rounded-lg transition-colors mb-2
                  hover:bg-gray-50 flex items-start space-x-3
                  ${h.id===n?"bg-blue-50 border border-blue-200 text-blue-700":"border border-transparent text-gray-700 hover:border-gray-200"}
                `,onClick:()=>m(h.id),children:[e.jsx(L,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate mb-1",children:[h.title,h.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 px-2 py-0.5 rounded-full",children:"当前"})]}),h.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate",children:h.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["创建时间: ",new Date(h.createdAt).toLocaleDateString()]})]})]},h.id))})}),e.jsxs("div",{className:"p-3 border-t border-gray-200 text-xs text-gray-500",children:["共 ",s.length," 份简历",i&&c.length!==s.length&&e.jsxs("span",{className:"ml-2",children:["(",c.length," 匹配)"]})]})]})},Z=bs,pa=gs,He=p.forwardRef(({className:t,...a},s)=>e.jsx(Me,{ref:s,className:O("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...a}));He.displayName=Me.displayName;const G=p.forwardRef(({className:t,children:a,...s},n)=>e.jsxs(pa,{children:[e.jsx(He,{}),e.jsxs(Ee,{ref:n,className:O("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s,children:[a,e.jsxs(fs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity outline-none hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));G.displayName=Ee.displayName;const q=({className:t,...a})=>e.jsx("div",{className:O("flex flex-col space-y-1.5 text-center sm:text-left",t),...a});q.displayName="DialogHeader";const Ge=({className:t,...a})=>e.jsx("div",{className:O("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a});Ge.displayName="DialogFooter";const W=p.forwardRef(({className:t,...a},s)=>e.jsx($e,{ref:s,className:O("text-lg font-semibold leading-none tracking-tight",t),...a}));W.displayName=$e.displayName;const J=p.forwardRef(({className:t,...a},s)=>e.jsx(Te,{ref:s,className:O("text-sm text-muted-foreground",t),...a}));J.displayName=Te.displayName;const ga=({isOpen:t,onClose:a,onConfirm:s})=>e.jsx(Z,{open:t,onOpenChange:a,children:e.jsxs(G,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsxs(W,{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"确认重置简历"})]}),e.jsx(J,{children:"此操作将会导致当前简历内容的永久性丢失，请谨慎操作。"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"确定要重置整份简历吗？此操作将丢失当前所有已修改的数据，并恢复初始状态！"}),e.jsx("p",{className:"text-red-600 text-sm mt-4 font-medium",children:"⚠️ 此操作无法撤销，请谨慎操作！"})]}),e.jsxs(Ge,{className:"flex space-x-2",children:[e.jsx(f,{variant:"outline",onClick:a,className:"min-w-[80px]",children:"取消"}),e.jsx(f,{onClick:s,className:"min-w-[80px] bg-red-600 hover:bg-red-700",children:"确认重置"})]})]})}),qe=[{id:"deepseek",name:"DeepSeek Chat",url:"https://chat.deepseek.com/",icon:""},{id:"qwen",name:"Qwen Chat",url:"https://chat.qwen.ai/",icon:""},{id:"doubao",name:"豆包",url:"https://www.doubao.com/chat/",icon:""}],_=_e("ai-platforms",qe),fa=j(null,(t,a,s)=>{const n=t(_),r={...s,id:Date.now().toString()};a(_,[...n,r])}),ba=j(null,(t,a,s)=>{const r=t(_).map(l=>l.id===s.id?s:l);a(_,r)}),ja=j(null,(t,a,s)=>{const r=t(_).filter(l=>l.id!==s);a(_,r)}),va=j(null,(t,a)=>{a(_,qe)}),Na=({onManagePlatforms:t})=>{const[a,s]=p.useState(!1),n=P(_),r=o=>{window.open(o,"_blank","noopener,noreferrer"),s(!1)},l=()=>{t(),s(!1)},i=()=>{const o=`${window.location.origin}${window.location.pathname}#/prompts`;window.open(o,"_blank","noopener,noreferrer"),s(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>s(!a),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 text-xs px-2 py-1 h-auto",children:[e.jsx("span",{children:"常用工具平台"}),e.jsx(pt,{className:"h-3 w-3 ml-1"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>s(!1)}),e.jsx("div",{className:"absolute top-full right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:e.jsxs("div",{className:"py-1",children:[n.map(o=>e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-gray-700",onClick:()=>r(o.url),children:[e.jsx(le,{iconName:o.icon||"",className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"flex-1",children:o.name}),e.jsx(gt,{className:"h-3 w-3 text-gray-400"})]},o.id)),n.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"暂无AI平台"}),n.length>0&&e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-blue-600",onClick:l,children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{children:"管理工具平台"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-green-600",onClick:i,children:[e.jsx(ft,{className:"h-4 w-4"}),e.jsx("span",{children:"管理简历优化提示词"})]})]})})]})]})},We=p.forwardRef(({className:t,onCheckedChange:a,checkStatus:s,...n},r)=>{const l=i=>{a?.(i.target.checked)};return e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only",ref:r,onChange:l,...n}),e.jsx("div",{className:O("relative inline-flex h-6 w-11 items-center rounded-full duration-300 transition-colors outline-none",`bg-gray-200 ${s?"bg-blue-600":""}`,"disabled:cursor-not-allowed disabled:opacity-50",t),children:e.jsx("span",{className:O("inline-block h-4 w-4 transform rounded-full bg-white duration-300 transition-transform",`translate-x-1 ${s?"translate-x-6":""}`)})})]})});We.displayName="Switch";const I=j({isVisible:!1,message:"",variant:"default",position:"top-center"});j({autoClose:!0,autoCloseDelay:3e3,defaultVisible:!1});const wa=j(t=>t(I).isVisible,(t,a,s)=>{a(I,{...t(I),isVisible:s})}),ya=j(t=>t(I).message,(t,a,s)=>{a(I,{...t(I),message:s})}),Sa=j(t=>t(I).variant,(t,a,s)=>{a(I,{...t(I),variant:s})}),Ca=j(t=>t(I).position,(t,a,s)=>{a(I,{...t(I),position:s})}),X=j(null,(t,a,s,n="default",r="top-center")=>{a(I,{...t(I),message:s,variant:n,position:r,isVisible:!0}),console.log("showMessage",s,n,r,t(I).isVisible)}),Ra=j(null,(t,a)=>{a(I,{...t(I),isVisible:!1})}),ka=j(null,(t,a,s,n)=>{a(X,s,"info",n)}),Da=j(null,(t,a,s,n)=>{a(X,s,"success",n)}),Ia=j(null,(t,a,s,n)=>{a(X,s,"warning",n)}),Aa=j(null,(t,a,s,n)=>{a(X,s,"error",n)}),fe=(t={})=>{const{autoClose:a=!0,autoCloseDelay:s=3e3,defaultVisible:n=!1}=t,[r,l]=js(wa),i=P(ya),o=P(Sa),d=P(Ca),c=C(X),m=C(Ra),g=C(ka),b=C(Da),h=C(Ia),v=C(Aa);return n&&!r&&l(!0),{isVisible:r,message:i,variant:o,position:d,showMessage:c,hideMessage:m,showInfo:g,showSuccess:b,showWarning:h,showError:v,autoClose:a,autoCloseDelay:s}},Pa=({isOpen:t,onClose:a})=>{const s=P(_),n=C(fa),r=C(ba),l=C(ja),i=C(va),{showSuccess:o,showError:d}=fe(),[c,m]=p.useState(null),[g,b]=p.useState(!1),[h,v]=p.useState(!0),u=()=>{m({name:"",url:"",icon:""}),b(!0)},S=y=>{m({id:y.id,name:y.name,url:y.url,icon:y.icon||""}),b(!1)},k=()=>{if(c){if(!c.name.trim()){d("请输入平台名称");return}if(!c.url.trim()){d("请输入平台URL");return}try{new URL(c.url)}catch{d("请输入有效的URL地址");return}g?(n({name:c.name.trim(),url:c.url.trim(),icon:h?c.icon:""}),o("AI平台添加成功")):c.id&&(r({id:c.id,name:c.name.trim(),url:c.url.trim(),icon:c.icon}),o("AI平台更新成功")),m(null),b(!1)}},z=y=>{l(y),o("AI平台删除成功")},M=()=>{i(),o("已重置为默认AI平台")},F=()=>{m(null),b(!1)};return e.jsx(Z,{open:t,onOpenChange:a,children:e.jsxs(G,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(q,{children:[e.jsx(W,{children:"管理工具平台"}),e.jsx(J,{children:"添加、编辑或删除常用的AI/工具平台。点击平台可以在新标签页中打开。"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[s.map(y=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(le,{iconName:y.icon||"",className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:y.name}),e.jsx("div",{className:"text-sm text-gray-500",children:y.url})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S(y),children:e.jsx(ae,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>z(y.id),className:"text-red-600 hover:text-red-700",children:e.jsx(H,{className:"h-4 w-4"})})]})]},y.id)),s.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"暂无AI平台，点击下方按钮添加"})]}),c&&e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx("h4",{className:"font-medium mb-3",children:g?"添加新平台":"编辑平台"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"platform-name",children:"平台名称"}),e.jsx($,{id:"platform-name",value:c.name,onChange:y=>m({...c,name:y.target.value}),placeholder:"例如：ChatGPT"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"platform-url",children:"平台URL"}),e.jsx($,{id:"platform-url",value:c.url,onChange:y=>m({...c,url:y.target.value}),placeholder:"例如：https://chat.openai.com"})]}),g&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(We,{checked:h,checkStatus:h,onCheckedChange:v,id:"icons-enabled"}),e.jsx(T,{htmlFor:"icons-enabled",className:"text-sm text-gray-600",children:"使用图标"})]}),e.jsx("div",{className:`transition-all duration-300 ease-in-out ${h?"opacity-100 max-h-96 overflow-visible":"opacity-0 max-h-0 overflow-hidden"}`,children:e.jsx(Ie,{value:c.icon,onChange:y=>m({...c,icon:y}),label:"图标"})})]}),!g&&e.jsx("div",{children:e.jsx(Ie,{value:c.icon,onChange:y=>m({...c,icon:y}),label:"图标"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{onClick:k,size:"sm",children:"保存"}),e.jsx(f,{variant:"outline",onClick:F,size:"sm",children:"取消"})]})]})]}),!c&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(f,{variant:"outline",onClick:u,className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4"}),e.jsx("span",{children:"添加平台"})]}),e.jsxs(f,{variant:"ghost",onClick:M,className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(bt,{className:"h-4 w-4"}),e.jsx("span",{children:"重置为默认"})]})]})]})]})})},Oa=({onPreview:t,onClear:a,onManageResumes:s})=>{const[n,r]=p.useState(!1),l=pe(),i=()=>{l("/sections")};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:s,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(jt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"简历管理"})]}),e.jsxs(f,{onClick:i,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(he,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"管理模块"})]}),e.jsxs(f,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"预览 & 导出"})]}),e.jsxs(f,{onClick:a,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"重置"})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Na,{onManagePlatforms:()=>r(!0)})}),e.jsx(Pa,{isOpen:n,onClose:()=>r(!1)})]})},za=()=>e.jsx("footer",{className:"mt-12 py-6 text-center text-gray-500 text-xs",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx("p",{children:"✨ 让每一份简历都闪闪发光 ✨"}),e.jsx("p",{className:"mt-1 text-gray-400",children:"数据自动保存到本地浏览器，刷新页面不会丢失"})]})}),Ma=({isOpen:t,onClose:a,onConfirm:s,resumeTitle:n,isLastResume:r=!1})=>{const l=()=>{s(),a()};return e.jsx(Z,{open:t,onOpenChange:a,children:e.jsxs(G,{className:"max-w-md",children:[e.jsx(q,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(ye,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx(W,{className:"text-lg font-semibold text-gray-900",children:"删除简历"}),e.jsx(J,{className:"text-sm text-gray-600",children:"此操作不可恢复"})]})]})}),e.jsx("div",{className:"py-4",children:r?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(ye,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"无法删除最后一份简历"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"系统需要至少保留一份简历。请先创建新简历后再删除此简历。"})]})]})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["确定要删除简历 ",e.jsxs("span",{className:"font-medium text-gray-900",children:['"',n,'"']})," 吗？"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"警告"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"删除后，该简历的所有数据将永久丢失，无法恢复。"})]})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(f,{variant:"outline",onClick:a,disabled:r,children:"取消"}),!r&&e.jsxs(f,{variant:"destructive",onClick:l,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"确认删除"]})]})]})})},Ea=({isOpen:t,onClose:a})=>{const{resumeList:s,currentResumeId:n,totalCount:r,switchResume:l,createResume:i,deleteResume:o,batchDeleteResumes:d,renameResume:c,duplicateResume:m,exportResume:g,exportAllResumes:b,importSingleResume:h,importBatchResumes:v}=re(),{showMessage:u}=fe(),[S,k]=p.useState(null),[z,M]=p.useState(!1),[F,y]=p.useState(""),[ee,Q]=p.useState(""),[Y,E]=p.useState(null),[B,w]=p.useState(!1),[N,U]=p.useState(new Set),[ie,oe]=p.useState({isOpen:!1,resumeId:"",resumeTitle:""}),[be,ce]=p.useState({isOpen:!1,selectedCount:0}),Qe=()=>{if(!F.trim()){u("请输入简历标题","warning");return}i(F.trim(),ee.trim()||void 0)?(u("简历创建成功","success"),M(!1),y(""),Q("")):u("创建失败，请重试","error")},Ye=x=>{k({id:x.id,title:x.title,description:x.description||""}),E(null)},Ke=()=>{if(!S||!S.title.trim()){u("请输入简历标题","warning");return}c(S.id,S.title.trim(),S.description.trim()||void 0)?(u("保存成功","success"),k(null)):u("保存失败，请重试","error")},Ze=()=>{k(null)},Xe=(x,D)=>{oe({isOpen:!0,resumeId:x,resumeTitle:D}),E(null)},es=()=>{const{resumeId:x}=ie;o(x)?u("简历删除成功","success"):u("删除失败，请重试","error"),oe({isOpen:!1,resumeId:"",resumeTitle:""})},ss=()=>{oe({isOpen:!1,resumeId:"",resumeTitle:""})},ts=(x,D)=>{m(x,`${D} - 副本`)?u("简历复制成功","success"):u("复制失败，请重试","error"),E(null)},as=x=>{x!==n&&(l(x),u("已切换简历","success"))},ns=(x,D)=>{g(x)?u(`简历"${D}"导出成功`,"success"):u("导出失败，请重试","error"),E(null)},rs=()=>{b()?u("所有简历导出成功","success"):u("导出失败，请重试","error")},ls=async()=>{await h(u)&&u("简历导入成功","success")},is=async()=>{const x=await v(u);x.length>0&&u(`成功导入 ${x.length} 份简历`,"success")},os=()=>{w(!0),U(new Set),E(null)},je=()=>{w(!1),U(new Set)},ve=x=>{const D=new Set(N);D.has(x)?D.delete(x):D.add(x),U(D)},cs=()=>{N.size===s.length?U(new Set):U(new Set(s.map(x=>x.id)))},ds=()=>{if(N.size===0){u("请选择要删除的简历","warning");return}if(N.size>=s.length){u("不能删除所有简历，至少要保留一份","warning");return}ce({isOpen:!0,selectedCount:N.size})},ms=()=>{d(Array.from(N))?(u(`成功删除 ${N.size} 份简历`,"success"),je()):u("删除失败，请重试","error"),ce({isOpen:!1,selectedCount:0})},Ne=()=>{ce({isOpen:!1,selectedCount:0})},we=x=>new Date(x).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx(Z,{open:t,onOpenChange:a,children:e.jsxs(G,{className:"max-w-4xl max-h-[85vh] flex flex-col",children:[e.jsxs(q,{children:[e.jsx(W,{className:"text-xl font-semibold text-gray-800",children:"简历管理"}),e.jsx(J,{children:"管理您的所有简历，支持创建、编辑、导入导出等操作"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 py-4 border-b border-gray-200",children:B?e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:je,variant:"outline",size:"sm",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),"退出批量模式"]}),e.jsxs(f,{onClick:cs,variant:"outline",size:"sm",children:[e.jsx(Re,{className:"h-4 w-4 mr-1"}),N.size===s.length?"取消全选":"全选"]}),e.jsxs(f,{onClick:ds,variant:"outline",size:"sm",disabled:N.size===0,className:"text-red-600 border-red-300 hover:bg-red-50 disabled:opacity-50",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"删除选中 (",N.size,")"]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-500 flex items-center",children:["已选择 ",N.size," / ",r," 份简历"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:()=>M(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(te,{className:"h-4 w-4 mr-1"}),"新建简历"]}),e.jsxs(f,{onClick:ls,variant:"outline",size:"sm",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"导入简历"]}),e.jsxs(f,{onClick:is,variant:"outline",size:"sm",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"批量导入"]}),e.jsxs(f,{onClick:rs,variant:"outline",size:"sm",children:[e.jsx(Ce,{className:"h-4 w-4 mr-1"}),"导出全部"]}),r>1&&e.jsxs(f,{onClick:os,variant:"outline",size:"sm",className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(V,{className:"h-4 w-4 mr-1"}),"批量操作"]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-500 flex items-center",children:["共 ",r," 份简历"]})]})}),z&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"创建新简历"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"new-title",children:"简历标题 *"}),e.jsx($,{id:"new-title",value:F,onChange:x=>y(x.target.value),placeholder:"请输入简历标题",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"new-description",children:"描述"}),e.jsx($,{id:"new-description",value:ee,onChange:x=>Q(x.target.value),placeholder:"简历描述（可选）",className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{M(!1),y(""),Q("")},children:"取消"}),e.jsx(f,{size:"sm",onClick:Qe,children:"创建"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"space-y-2 p-1",children:s.map(x=>e.jsx("div",{className:`
                  p-4 border rounded-lg transition-all duration-200 hover:shadow-md
                  ${x.id===n?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}
                  ${B&&N.has(x.id)?"border-orange-500 bg-orange-50":""}
                `,children:S?.id===x.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-title",children:"简历标题 *"}),e.jsx($,{id:"edit-title",value:S.title,onChange:D=>k({...S,title:D.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(T,{htmlFor:"edit-description",children:"描述"}),e.jsx($,{id:"edit-description",value:S.description,onChange:D=>k({...S,description:D.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:Ze,children:"取消"}),e.jsx(f,{size:"sm",onClick:Ke,children:"保存"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>{B?ve(x.id):as(x.id)},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[B?e.jsx("div",{className:`
                              w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer
                              ${N.has(x.id)?"bg-orange-500 border-orange-500 text-white":"border-gray-300 hover:border-orange-400"}
                            `,onClick:D=>{D.stopPropagation(),ve(x.id)},children:N.has(x.id)&&e.jsx(Re,{className:"h-3 w-3"})}):e.jsx(L,{className:`h-5 w-5 ${x.id===n?"text-blue-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${x.id===n?"text-blue-800":"text-gray-800"}`,children:[x.title,x.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"当前"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["创建于 ",we(x.createdAt)]}),e.jsxs("span",{children:["更新于 ",we(x.updatedAt)]}),x.description&&e.jsx("span",{className:"max-w-xs truncate",children:x.description})]})]})]})}),!B&&e.jsxs("div",{className:"relative",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>E(Y===x.id?null:x.id),children:e.jsx(Nt,{className:"h-4 w-4"})}),Y===x.id&&e.jsx("div",{className:"absolute right-0 top-8 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>Ye(x),children:[e.jsx(ae,{className:"h-4 w-4"}),e.jsx("span",{children:"编辑"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>ts(x.id,x.title),children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{children:"复制"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>ns(x.id,x.title),children:[e.jsx(Ce,{className:"h-4 w-4"}),e.jsx("span",{children:"导出"})]}),r>1&&e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 text-red-600 flex items-center space-x-2",onClick:()=>Xe(x.id,x.title),children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"删除"})]})]})})]})]})},x.id))})})]})}),Y&&e.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>E(null)}),e.jsx(Ma,{isOpen:ie.isOpen,onClose:ss,onConfirm:es,resumeTitle:ie.resumeTitle,isLastResume:r<=1}),e.jsx(Z,{open:be.isOpen,onOpenChange:Ne,children:e.jsxs(G,{className:"max-w-md",children:[e.jsxs(q,{children:[e.jsx(W,{className:"text-lg font-semibold text-red-600",children:"确认批量删除"}),e.jsxs(J,{children:["您确定要删除选中的 ",be.selectedCount," 份简历吗？此操作不可撤销。"]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(f,{variant:"outline",onClick:Ne,children:"取消"}),e.jsx(f,{onClick:ms,className:"bg-red-600 hover:bg-red-700",children:"确认删除"})]})]})})]})},$a=xe("fixed z-[9999] max-w-sm rounded-lg border shadow-lg transition-all duration-300 ease-in-out print:hidden",{variants:{variant:{default:"bg-white border-gray-200 text-gray-900",info:"bg-blue-50 border-blue-200 text-blue-900",success:"bg-green-50 border-green-200 text-green-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900",error:"bg-red-50 border-red-200 text-red-900"},position:{"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 -translate-x-1/2","bottom-center":"bottom-4 left-1/2 -translate-x-1/2"},size:{sm:"p-3 text-sm",md:"p-4 text-base",lg:"p-5 text-lg"}},defaultVariants:{variant:"default",position:"top-right",size:"md"}}),Je=p.forwardRef(({className:t,variant:a,position:s,size:n,message:r,isVisible:l,onClose:i,autoClose:o=!0,autoCloseDelay:d=3e3,showCloseButton:c=!0,icon:m,...g},b)=>{const[h,v]=p.useState(!1);p.useEffect(()=>{if(console.log("FloatingMessage useEffect:",{isVisible:l,autoClose:o,autoCloseDelay:d}),l){if(console.log("显示消息:",r),v(!0),o){const S=setTimeout(()=>{u(),console.log("关闭消息:",r)},d);return()=>clearTimeout(S)}}else v(!1)},[l,o,d,r]);const u=()=>{v(!1),setTimeout(()=>{i?.()},300)};return!l&&!h?null:e.jsx("div",{ref:b,className:O($a({variant:a,position:s,size:n}),l&&h?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-2 scale-95",t),...g,children:e.jsxs("div",{className:"flex items-start gap-3",children:[m&&e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:m}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium leading-relaxed break-words",children:r})}),c&&i&&e.jsx("button",{onClick:u,className:"flex-shrink-0 p-1 rounded-md hover:bg-black/5 transition-colors duration-200","aria-label":"Close message",children:e.jsx(V,{className:"w-4 h-4"})})]})})});Je.displayName="FloatingMessage";const Ta=()=>{const t=P(A),a=C(qt),[s,n]=p.useState(!1),[r,l]=p.useState(!1),[i,o]=p.useState(!1),{isVisible:d,message:c,variant:m,position:g,hideMessage:b,autoClose:h,autoCloseDelay:v}=fe();p.useEffect(()=>{console.log("FloatingMessage:",{isVisible:d,message:c,variant:m,position:g})},[d]);const u=()=>{const M=`${window.location.origin}${window.location.pathname}#/preview`;window.open(M,"_blank","noopener,noreferrer")},S=()=>{a(),n(!1)},k=()=>{l(!0)},z=()=>{o(!i)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[e.jsx(Ht,{children:e.jsx(Oa,{onPreview:u,onClear:()=>n(!0),onManageResumes:k})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"hidden p-4 lg:block",children:e.jsx(ha,{isCollapsed:i,onToggleCollapse:z})}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"max-w-6xl mx-auto p-4",children:e.jsx(xa,{resume:t,isEditable:!0,className:"bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen"})})})]}),e.jsx(ga,{isOpen:s,onClose:()=>n(!1),onConfirm:S}),e.jsx(Ea,{isOpen:r,onClose:()=>l(!1)}),e.jsx(za,{})]}),e.jsx(Je,{message:c,isVisible:d,variant:m,position:g,onClose:b,autoClose:h,autoCloseDelay:v})]})},_a=()=>e.jsx(Ta,{}),La=se.lazy(()=>ne(()=>import("./PreviewPage-CHrgt7UQ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(t=>({default:t.PreviewPage}))),Fa=se.lazy(()=>ne(()=>import("./PromptManagePage-sev3hFEY.js"),__vite__mapDeps([8,1,2,3,6,5,4,7])).then(t=>({default:t.PromptManagePage}))),Ba=se.lazy(()=>ne(()=>import("./SectionManagerPage-BKchy8Wo.js"),__vite__mapDeps([9,1,2,3,10,11,5,6,7,4])).then(t=>({default:t.SectionManagerPage}))),Ua=se.lazy(()=>ne(()=>import("./EditorPage-BFIes3sy.js"),__vite__mapDeps([12,1,2,3,5,6,10,11,7,4])).then(t=>({default:t.EditorPage})));function Va(){return e.jsx(vs,{children:e.jsx(yt,{children:e.jsxs(St,{children:[e.jsx(K,{path:"/",element:e.jsx(_a,{})}),e.jsx(K,{path:"/preview",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(La,{})})}),e.jsx(K,{path:"/prompts",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Fa,{})})}),e.jsx(K,{path:"/sections",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Ba,{})})}),e.jsx(K,{path:"/editor/:type/:sectionId",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Ua,{})})})]})})})}xs.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(Va,{})}));export{za as A,f as B,Z as D,Je as F,$ as I,T as L,xa as R,ne as _,G as a,q as b,O as c,W as d,J as e,sa as f,Ie as g,na as h,Ve as i,la as j,Ya as k,Xa as l,Ka as m,en as n,Ae as o,ia as p,A as r,fe as u,Za as v};
