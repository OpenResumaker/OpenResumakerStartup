const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PreviewPage-BZWL5xac.js","assets/vendor-BEfqtVUe.js","assets/utils-DxjPgW5d.js","assets/vendor-DZrYvFpI.css","assets/ui-vendor-DQ8_5H5A.js","assets/lucide-react-CSs-6XWH.js","assets/state-DlvjQ27R.js","assets/router-24HdL0-o.js","assets/PromptManagePage-DlLEAzU1.js","assets/SectionManagerPage-4wMw1dlo.js","assets/dnd-kit-XX601_NE.js","assets/select-Ck5-MnI1.js","assets/EditorPage-CObGU7TM.js"])))=>i.map(i=>d[i]);
import{r as p,j as e,M as $e,u as le,m as gs}from"./vendor-BEfqtVUe.js";import{t as fs,a as Fe,b as be}from"./utils-DxjPgW5d.js";import{S as bs,R as Le,O as _e,P as js,C as Be,a as vs,T as Ue,D as Ve,b as ys}from"./ui-vendor-DQ8_5H5A.js";import{a as b,b as Ge,u as P,c as C,d as Ns,P as ws}from"./state-DlvjQ27R.js";import{M as Ss,F as _,X as G,S as He,P as ie,a as Cs,U as se,b as te,c as ae,d as Rs,H as ks,C as Ds,B as As,e as Is,G as Ps,A as zs,T as Ms,R as Os,f as Es,D as Ts,g as $s,h as Fs,W as Ls,i as _s,j as Bs,k as Us,l as je,m as Vs,L as Gs,n as Hs,I as qs,Y as Ws,o as Js,p as Qs,q as Ys,r as Ks,s as Zs,t as Xs,u as et,v as st,w as tt,x as at,y as nt,z as rt,E as lt,J as it,K as ot,N as ct,O as dt,Q as mt,V as ut,Z as xt,_ as ht,$ as pt,a0 as q,a1 as gt,a2 as ft,a3 as H,a4 as bt,a5 as jt,a6 as vt,a7 as yt,a8 as Nt,a9 as wt,aa as De,ab as Ae,ac as Ie,ad as Pe,ae as St,af as Ct}from"./lucide-react-CSs-6XWH.js";import{u as ve,H as Rt,R as kt,a as X}from"./router-24HdL0-o.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();const Dt="modulepreload",At=function(s){return"/"+s},ze={},oe=function(a,t,n){let r=Promise.resolve();if(t&&t.length>0){let h=function(c){return Promise.all(c.map(d=>Promise.resolve(d).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=i?.nonce||i?.getAttribute("nonce");r=h(t.map(c=>{if(c=At(c),c in ze)return;ze[c]=!0;const d=c.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const j=document.createElement("link");if(j.rel=d?"stylesheet":Dt,d||(j.as="script"),j.crossOrigin="",j.href=c,o&&j.setAttribute("nonce",o),document.head.appendChild(j),d)return new Promise((x,v)=>{j.addEventListener("load",x),j.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return r.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return a().catch(l)})};function M(...s){return fs(Fe(s))}const It=be("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),f=p.forwardRef(({className:s,variant:a,size:t,asChild:n=!1,...r},l)=>{const i=n?bs:"button";return e.jsx(i,{className:M(It({variant:a,size:t,className:s})),ref:l,...r})});f.displayName="Button";const $=p.forwardRef(({className:s,type:a,...t},n)=>e.jsx("input",{type:a,className:M("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background outline-none file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",s),ref:n,...t}));$.displayName="Input";const Me=s=>{try{const a=JSON.stringify(s,null,2),t=new Blob([a],{type:"application/json"}),n=URL.createObjectURL(t),r=document.createElement("a");return r.href=n,r.download=`${s.title||"简历"}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n),!0}catch(a){return console.error("导出简历失败:",a),!1}},Pt=s=>new Promise(a=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async n=>{const r=n.target.files?.[0];if(!r){a(null);return}try{const l=await r.text(),i=JSON.parse(l);if(!i.id||!i.title||!i.sections)throw new Error("无效的简历文件格式");a(i)}catch(l){console.error("导入简历失败:",l),s?.("导入失败：文件格式不正确或文件已损坏","error"),a(null)}},t.oncancel=()=>{a(null)},t.click()}),zt=(s,a="简历合集")=>{try{const t=JSON.stringify(s,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),l=document.createElement("a");return l.href=r,l.download=`${a}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r),!0}catch(t){return console.error("批量导出简历失败:",t),!1}},Mt=s=>new Promise(a=>{const t=document.createElement("input");t.type="file",t.accept=".json",t.onchange=async n=>{const r=n.target.files?.[0];if(!r){a(null);return}try{const l=await r.text(),i=JSON.parse(l);if(Array.isArray(i)){const o=i.filter(h=>h&&typeof h=="object"&&h.id&&h.title&&h.sections);if(o.length===0)throw new Error("没有找到有效的简历数据");a(o)}else if(i.id&&i.title&&i.sections)a([i]);else throw new Error("无效的文件格式")}catch(l){console.error("批量导入简历失败:",l),s?.("导入失败：文件格式不正确或文件已损坏","error"),a(null)}},t.oncancel=()=>{a(null)},t.click()}),ye={id:"1",title:"我的简历",template:"default",layout:"top-bottom",pageSettings:{enableMultiPage:!1,totalPages:1},sections:[{id:"basic-info",title:"基本信息",iconName:"user",type:"basic",visible:!0,order:1,data:{avatar:"https://phzdoc.oss-cn-beijing.aliyuncs.com/uPic/avatar.JPG",name:"白玩",email:"example@gmail.com",phone:"12345678901",gender:"男",age:"24",location:"北京",website:"",customFields:[{id:"1",label:"7年工作经验",value:"",iconName:"briefcase"},{id:"2",label:"期望城市",value:"北京",iconName:"map-pin"},{id:"3",label:"个人网站",value:"https://whitemeta.cn",iconName:"globe"},{id:"4",label:"b站",value:"https://space.bilibili.com/107889531",iconName:"tv"},{id:"5",label:"清华大学",value:"",iconName:"graduation-cap"}]}},{id:"advantages",title:"个人优势",iconName:"star",type:"list",editorType:"text",visible:!0,order:2,data:{content:"<ol><li>熟练使用 <strong>HTML5</strong> + <strong>CSS3</strong> 技术</li><li>熟练掌握 <strong>JavaScript (ES6+)</strong> 和 <strong>Vue</strong> 技术栈，并深入了解其原理</li><li>丰富的大型网站开发经验，对前端工程化，性能优化有丰富的实战经验</li><li>熟练掌握 <strong>TypeScript</strong>，<strong>SCSS</strong></li><li>擅长 <strong>Webpack</strong> 配置与前端架构设计</li><li>熟悉 <strong>Node.js</strong>，包括 <strong>Express</strong>/<strong>Koa</strong> 等服务端框架</li></ol>"}},{id:"projects",title:"项目经历",iconName:"settings",type:"timeline",editorType:"timeline",visible:!0,order:3,data:[{description:'<p>一个基于 <strong>React 19</strong> 构建的现代化在线简历编辑器，提供所见即所得的编辑体验。</p><ul><li>为了更轻量、更容易定制，组件库选择了 <strong>Shadcn/UI</strong></li><li>构建工具选择了 <strong>Vite</strong> 并优化了首屏加载性能，总资源小于1MB</li><li>基于 <strong>Docker</strong> + <strong>GithubAction</strong> 实现全自动 CI/CD</li><li>这份项目是开源的，地址 <a href="https://github.com/WhiteP1ay/resumaker" target="_blank" rel="noopener noreferrer">https://github.com/WhiteP1ay/resumaker</a></li><li>这份简历就是通过这个编辑工具制作出来的</li></ul>',endDate:"2024-12",id:"1756977218779",secondarySubtitle:"resume.whitemeta.cn",startDate:"2024-01",subtitle:"全栈",title:"简历编辑器"},{id:"1757064171447",title:"个人网站",subtitle:"全栈",secondarySubtitle:"whitemeta.cn",startDate:"2023-06",endDate:"2024-12",description:'<p>一个基于 <strong>Next 15</strong> 构建的博客网站</p><ul><li>良好的SEO，Google搜索"whitemeta"，本站排名第一</li><li>基于 <strong>TailwindCSS</strong> 实现 PC & H5 双端适配</li><li>基于 <strong>Google Analytics</strong> 实现全站流量统计</li><li>当然博客网站最重要的还是内容，希望您能通过博文来更全面了解我</li></ul>'}]},{id:"experience",title:"工作经历",iconName:"briefcase",type:"timeline",editorType:"timeline",visible:!0,order:4,data:[{id:"1",title:"阿里巴巴",subtitle:"高级前端工程师",secondarySubtitle:"杭州",startDate:"2022-03",endDate:"2024-06",description:"负责核心业务前端开发，参与架构设计和技术选型。"},{id:"2",title:"字节跳动",subtitle:"前端工程师",secondarySubtitle:"北京",startDate:"2020-07",endDate:"2022-02",description:"参与多个大型项目开发，负责性能优化和用户体验提升。"}]}]},Ot={currentResumeId:"1",resumes:{1:ye},metadata:{1:{id:"1",title:"我的简历",createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),description:"默认简历"}}},k=Ge("resume-collection",Ot),ge=b(s=>{const a=s(k);return a.resumes[a.currentResumeId]||Object.values(a.resumes)[0]},(s,a,t)=>{const n=s(k);a(k,{...n,resumes:{...n.resumes,[t.id]:t},metadata:{...n.metadata,[t.id]:{...n.metadata[t.id],updatedAt:new Date().toISOString()}}})}),Et=b(null,(s,a,t)=>{const n=s(k);n.resumes[t]&&a(k,{...n,currentResumeId:t})}),Tt=b(null,(s,a,t,n)=>{const r=s(k),l=Date.now().toString(),i=new Date().toISOString(),o={...ye,id:l,title:t,pageSettings:{enableMultiPage:!1,totalPages:1}},h={id:l,title:t,createdAt:i,updatedAt:i,description:n};return a(k,{...r,currentResumeId:l,resumes:{...r.resumes,[l]:o},metadata:{...r.metadata,[l]:h}}),l}),$t=b(null,(s,a,t)=>{const n=s(k);if(Object.keys(n.resumes).length<=1)return!1;const{...r}=n.resumes,{...l}=n.metadata;r[t]&&(delete r[t],delete l[t]);let i=n.currentResumeId;return n.currentResumeId===t&&(i=Object.keys(r)[0]),a(k,{currentResumeId:i,resumes:r,metadata:l}),!0}),Ft=b(null,(s,a,t,n,r)=>{const l=s(k);return l.resumes[t]?(a(k,{...l,resumes:{...l.resumes,[t]:{...l.resumes[t],title:n}},metadata:{...l.metadata,[t]:{...l.metadata[t],title:n,description:r,updatedAt:new Date().toISOString()}}}),!0):!1}),Lt=b(null,(s,a,t,n)=>{const r=s(k),l=r.resumes[t];if(!l)return null;const i=Date.now().toString(),o=new Date().toISOString(),h=n||`${l.title} - 副本`,c={...l,id:i,title:h},d={id:i,title:h,createdAt:o,updatedAt:o,description:`${r.metadata[t]?.description||""} (副本)`};return a(k,{...r,currentResumeId:i,resumes:{...r.resumes,[i]:c},metadata:{...r.metadata,[i]:d}}),i}),_t=b(null,(s,a,t,n)=>{const r=s(k),l=new Date().toISOString();let i=t.id;r.resumes[i]&&(i=Date.now().toString());const o={...t,id:i},h={id:i,title:t.title,createdAt:l,updatedAt:l,description:"导入的简历",...n};return a(k,{...r,currentResumeId:i,resumes:{...r.resumes,[i]:o},metadata:{...r.metadata,[i]:h}}),i}),Bt=b(null,(s,a,t)=>{const n=s(k),r=new Date().toISOString(),l=[],i={...n.resumes},o={...n.metadata};for(const c of t){let d=c.id,g=1;for(;i[d];)d=`${c.id}_${g}`,g++;const j={...c,id:d},x={id:d,title:c.title,createdAt:r,updatedAt:r,description:"导入的简历"};i[d]=j,o[d]=x,l.push(d)}const h=l.length>0?l[0]:n.currentResumeId;return a(k,{...n,currentResumeId:h,resumes:i,metadata:o}),l}),Ut=b(s=>{const a=s(k);return Object.values(a.metadata).sort((t,n)=>new Date(n.updatedAt).getTime()-new Date(t.updatedAt).getTime())}),Vt=b(null,(s,a,t)=>{const n=s(k);if(t.length>=Object.keys(n.resumes).length)return!1;const r=t.filter(h=>n.resumes[h]);if(r.length===0)return!1;const l={...n.resumes},i={...n.metadata};r.forEach(h=>{delete l[h],delete i[h]});let o=n.currentResumeId;return r.includes(n.currentResumeId)&&(o=Object.keys(l)[0]),a(k,{currentResumeId:o,resumes:l,metadata:i}),!0}),Gt=b(s=>s(k).currentResumeId),ce=()=>{const s=P(ge),a=P(Gt),t=P(Ut),n=P(k),r=C(ge),l=C(Et),i=C(Tt),o=C($t),h=C(Ft),c=C(Lt),d=C(_t),g=C(Bt),j=C(Vt),x=p.useCallback(()=>Me(s),[s]),v=p.useCallback(N=>{const y=n.resumes[N];return y?Me(y):!1},[n.resumes]),m=p.useCallback(()=>{const N=Object.values(n.resumes);return zt(N,"所有简历")},[n.resumes]),S=p.useCallback(async N=>{const y=await Pt(N);return y?d(y):null},[d]),D=p.useCallback(async N=>{const y=await Mt(N);return y&&y.length>0?g(y):[]},[g]),O=p.useCallback((N,y)=>i(N,y),[i]),E=p.useCallback(N=>o(N),[o]),B=p.useCallback(N=>j(N),[j]),w=p.useCallback((N,y,V)=>h(N,y,V),[h]),re=p.useCallback((N,y)=>c(N,y),[c]),K=p.useCallback(N=>{l(N)},[l]),Z=p.useCallback(N=>{r(N)},[r]),T=p.useCallback(N=>n.metadata[N],[n.metadata]),U=p.useCallback(N=>n.resumes[N],[n.resumes]);return{currentResume:s,currentResumeId:a,resumeList:t,totalCount:t.length,switchResume:K,createResume:O,deleteResume:E,batchDeleteResumes:B,renameResume:w,duplicateResume:re,updateCurrentResume:Z,exportCurrentResume:x,exportResume:v,exportAllResumes:m,importSingleResume:S,importBatchResumes:D,getResumeMetadata:T,getResumeData:U}},Ht=({isOpen:s,onClose:a})=>{const{resumeList:t,currentResumeId:n,switchResume:r,getResumeMetadata:l,createResume:i}=ce(),[o,h]=p.useState(""),c=p.useMemo(()=>{const m=new $e({fields:["title","description"],storeFields:["id","title","description"],searchOptions:{boost:{title:2},fuzzy:.2,prefix:!0}}),S=t.map(D=>({id:D.id,title:D.title,description:D.description||""}));return m.addAll(S),m},[t]),d=p.useMemo(()=>{if(!o.trim())return t;try{return c.search(o).map(D=>t.find(O=>O.id===D.id)).filter(D=>D!==void 0)}catch(m){return console.error("Search error:",m),t}},[o,t,c]),g=m=>{m!==n&&r(m),a()},j=()=>{i(`新简历 ${t.length+1}`,"简历描述"),a()},x=()=>{h("")},v=l(n);return s?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40",onClick:a}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-lg z-50 max-h-[80vh] flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"简历列表"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2",children:e.jsx(G,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-3 p-2 bg-blue-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(_,{className:"h-4 w-4 text-blue-600"}),e.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["当前: ",v?.title||"未知简历"]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"搜索简历标题或内容...",value:o,onChange:m=>h(m.target.value),className:"pl-10 pr-10"}),o&&e.jsx(f,{variant:"ghost",size:"sm",onClick:x,className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-1 h-6 w-6",children:e.jsx(G,{className:"h-3 w-3"})})]}),e.jsxs(f,{onClick:j,className:"w-full mt-3 flex items-center space-x-2",size:"sm",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:"新建简历"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:d.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:o?"未找到匹配的简历":"暂无简历"}):d.map(m=>e.jsxs("button",{className:`
                    w-full p-3 text-left rounded-lg transition-colors mb-2
                    flex items-start space-x-3
                    ${m.id===n?"bg-blue-50 border border-blue-200 text-blue-700":"border border-gray-200 text-gray-700 hover:bg-gray-50"}
                  `,onClick:()=>g(m.id),children:[e.jsx(_,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate mb-1",children:[m.title,m.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 px-2 py-0.5 rounded-full",children:"当前"})]}),m.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate",children:m.description}),e.jsx("div",{className:"text-xs text-gray-400 mt-1",children:new Date(m.createdAt).toLocaleDateString()})]})]},m.id))})}),e.jsxs("div",{className:"p-3 border-t border-gray-200 text-xs text-gray-500 text-center",children:["共 ",t.length," 份简历",o&&d.length!==t.length&&e.jsxs("span",{className:"ml-2",children:["(",d.length," 匹配)"]})]})]})]}):null},qt=({onOpenDrawer:s})=>{const{getResumeMetadata:a,currentResumeId:t}=ce(),n=a(t);return e.jsxs(f,{variant:"outline",size:"sm",onClick:s,className:"flex items-center space-x-2",children:[e.jsx(Ss,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate max-w-[120px]",children:n?.title||"未知简历"})]})]})},Wt=({children:s})=>{const[a,t]=p.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("header",{className:"bg-white/80 backdrop-blur-md shadow-lg border-b border-gray-200 sticky top-0 z-40",children:e.jsx("div",{className:"max-w-6xl mx-auto px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 mr-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center shadow-md",children:e.jsx(_,{className:"h-5 w-5 text-white"})}),e.jsx(Cs,{className:"absolute -top-0.5 -right-0.5 h-3 w-3 text-yellow-400"})]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("h1",{className:"text-lg font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"简历制作工具"}),e.jsx("p",{className:"text-xs text-gray-600",children:"创建专业的个人简历，展示最好的自己"})]})]}),e.jsx("div",{className:"block mr-3 lg:hidden",children:e.jsx(qt,{onOpenDrawer:()=>t(!0)})}),e.jsx("div",{className:"flex items-center space-x-3",children:s})]})})}),e.jsx(Ht,{isOpen:a,onClose:()=>t(!1)})]})},Jt=be("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=p.forwardRef(({className:s,...a},t)=>e.jsx(Le,{ref:t,className:M(Jt(),s),...a}));F.displayName=Le.displayName;const fe=[{name:"user",icon:se,label:"用户"},{name:"mail",icon:te,label:"邮箱"},{name:"phone",icon:ae,label:"电话"},{name:"map-pin",icon:Rs,label:"位置"},{name:"home",icon:ks,label:"家庭"},{name:"car",icon:Ds,label:"交通"},{name:"briefcase",icon:As,label:"工作"},{name:"building",icon:Is,label:"公司"},{name:"graduation-cap",icon:Ps,label:"教育"},{name:"award",icon:zs,label:"奖项"},{name:"trophy",icon:Ms,label:"成就"},{name:"rocket",icon:Os,label:"创业"},{name:"code",icon:Es,label:"编程"},{name:"database",icon:Ts,label:"数据库"},{name:"cloud",icon:$s,label:"云计算"},{name:"cpu",icon:Fs,label:"硬件"},{name:"wifi",icon:Ls,label:"网络"},{name:"shield",icon:_s,label:"安全"},{name:"monitor",icon:Bs,label:"前端"},{name:"smartphone",icon:Us,label:"移动端"},{name:"settings",icon:je,label:"运维"},{name:"github",icon:Vs,label:"GitHub"},{name:"linkedin",icon:Gs,label:"LinkedIn"},{name:"twitter",icon:Hs,label:"Twitter"},{name:"instagram",icon:qs,label:"Instagram"},{name:"youtube",icon:Ws,label:"YouTube"},{name:"facebook",icon:Js,label:"Facebook"},{name:"message-circle",icon:Qs,label:"微信"},{name:"link",icon:Ys,label:"链接"},{name:"tv",icon:Ks,label:"电视"},{name:"camera",icon:Zs,label:"摄影"},{name:"music",icon:Xs,label:"音乐"},{name:"headphones",icon:et,label:"音响"},{name:"palette",icon:st,label:"设计"},{name:"gamepad-2",icon:tt,label:"游戏"},{name:"plane",icon:at,label:"旅行"},{name:"book",icon:nt,label:"阅读"},{name:"coffee",icon:rt,label:"咖啡"},{name:"globe",icon:lt,label:"网站"},{name:"calendar",icon:it,label:"时间"},{name:"file-text",icon:_,label:"文档"},{name:"shopping-bag",icon:ot,label:"购物"},{name:"credit-card",icon:ct,label:"金融"},{name:"star",icon:dt,label:"收藏"},{name:"heart",icon:mt,label:"喜欢"},{name:"target",icon:ut,label:"目标"},{name:"zap",icon:xt,label:"能量"},{name:"folder",icon:ht,label:"文件夹"},{name:"briefcase-business",icon:pt,label:"商务"}],Oe=({value:s,onChange:a,label:t="图标"})=>{const[n,r]=p.useState(!1),l=fe.find(i=>i.name===s);return e.jsxs("div",{className:"space-y-2",children:[t&&e.jsx(F,{className:"text-sm font-medium text-gray-700",children:t}),e.jsxs("div",{className:"relative",children:[e.jsx(f,{type:"button",variant:"outline",onClick:()=>r(!n),className:"w-full justify-start h-10",children:l?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(l.icon,{className:"h-4 w-4"}),e.jsx("span",{children:l.label})]}):e.jsx("span",{className:"text-gray-500",children:"选择图标"})}),n&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-md shadow-lg z-50 max-h-80 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-6 gap-1 p-3",children:fe.map(i=>e.jsxs("button",{type:"button",onClick:()=>{a(i.name),r(!1)},className:`flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-100 transition-colors text-xs ${s===i.name?"bg-blue-50 text-blue-600":"text-gray-600"}`,title:i.label,children:[e.jsx(i.icon,{className:"h-4 w-4"}),e.jsx("span",{className:"truncate text-[10px] leading-tight",children:i.label})]},i.name))})})]}),n&&e.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>r(!1)})]})},de=({iconName:s,className:a})=>{const t=fe.find(n=>n.name===s)?.icon;return t?e.jsx(t,{className:a}):null},R=ge,Qt=b(null,(s,a)=>{const t=s(R);a(R,{...ye,id:t.id,title:t.title})}),Yt=b(null,(s,a,t)=>{const n=s(R),r=n.sections.map(l=>l.id===t.sectionId?{...l,data:t.data,...t.iconName!==void 0&&{iconName:t.iconName,icon:t.iconName},...t.dateFormat!==void 0&&{dateFormat:t.dateFormat}}:l);a(R,{...n,sections:r})}),Kt=b(null,(s,a,t)=>{const n=s(R),r=n.sections.map(l=>l.id===t.sectionId?{...l,...t.props}:l);a(R,{...n,sections:r})}),Zt=b(null,(s,a,t)=>{const n=s(R),r=n.sections.find(i=>i.type==="basic"),l=r?[r,...t]:t;a(R,{...n,sections:l})}),Xt=b(null,(s,a,t)=>{const n=s(R);a(R,{...n,sections:[...n.sections,t]})}),ea=b(null,(s,a,t)=>{const n=s(R),r=n.sections.filter(l=>l.id!==t);a(R,{...n,sections:r})}),sa=b(s=>a=>s(R).sections.find(n=>n.id===a)),ta=b(s=>s(R).sections.filter(t=>t.type!=="basic").sort((t,n)=>t.order-n.order)),aa=b(s=>s(R).sections.find(t=>t.type==="basic"));b(null,(s,a,t)=>{const n=s(R);a(R,{...n,pageSettings:t})});const sn=b(null,(s,a)=>{const t=s(R),r=(t.pageSettings?.totalPages||1)+1;return a(R,{...t,pageSettings:{enableMultiPage:r>1,totalPages:r}}),r}),tn=b(null,(s,a,t)=>{const n=s(R);if(t===1)return!1;const r=n.pageSettings?.totalPages||1;if(t>r)return!1;const l=n.sections.map(o=>o.pageNumber===t?{...o,pageNumber:1}:o.pageNumber&&o.pageNumber>t?{...o,pageNumber:o.pageNumber-1}:o),i=r-1;return a(R,{...n,sections:l,pageSettings:{enableMultiPage:i>1,totalPages:i}}),!0}),an=b(null,(s,a,t)=>{const n=s(R),r=n.sections.map(l=>{const i=t.find(o=>o.sectionId===l.id);return i?{...l,pageNumber:i.pageNumber}:l});a(R,{...n,sections:r})});b(s=>a=>s(R).sections.filter(n=>n.type!=="basic").filter(n=>(n.pageNumber||1)===a).filter(n=>n.visible).sort((n,r)=>n.order-r.order));const na=()=>{const s=C(Yt),a=C(Kt),t=C(Zt),n=C(Xt),r=C(ea),l=P(sa),i=P(ta),o=P(aa);return{updateSection:(x,v,m,S)=>{s({sectionId:x,data:v,iconName:m,dateFormat:S})},updateSectionIcon:(x,v)=>{a({sectionId:x,props:{iconName:v}})},updateSectionTitle:(x,v)=>{a({sectionId:x,props:{title:v}})},updateSectionEditorType:(x,v)=>{a({sectionId:x,props:{editorType:v}})},toggleSectionVisibility:x=>{const v=l(x);v&&a({sectionId:x,props:{visible:!v.visible}})},updateSectionsOrder:t,addSection:n,deleteSection:r,getSection:l,getNonBasicSections:i,getBasicSection:o}},qe=s=>{const{updateSection:a}=na();return{handleTimelineSave:(i,o,h)=>{a(s,i,o,h)},handleListSave:(i,o)=>{a(s,i,o)},handleTextSave:(i,o)=>{a(s,i,o)},handleBasicInfoSave:i=>{a(s,i)}}},me=s=>{const[a,t]=p.useState(!1),{handleBasicInfoSave:n}=qe(s);return{isEditing:a,startEditing:()=>{t(!0)},closeEditing:()=>{t(!1)},handleSave:d=>{n(d)},formatGenderAge:(d,g)=>d&&g?`${d} | ${g}岁`:d||(g?`${g}岁`:""),formatCustomFields:d=>!d||d.length===0?"":d.map(g=>e.jsxs("span",{className:"flex items-center gap-1",children:[g.iconName&&e.jsx(de,{iconName:g.iconName,className:"w-4 h-4"}),g.label," ",g.value]},g.id)),hasValue:d=>d&&d.trim()!==""}},ra={sm:"w-16 h-20 print:w-14 print:h-18",md:"w-24 h-32 print:w-20 print:h-28",lg:"w-32 h-40 print:w-28 print:h-36"},ue=({src:s,alt:a="头像",size:t="md",className:n=""})=>e.jsx(e.Fragment,{children:s&&e.jsx("div",{className:Fe(`${ra[t]} rounded-lg overflow-hidden ${n}`,"bg-gray-200 border border-gray-300"),children:e.jsx("img",{src:s,alt:a,className:"w-full h-full object-cover"})})}),z=({icon:s,children:a,className:t=""})=>e.jsxs("div",{className:`flex items-center space-x-1 ${t}`,children:[e.jsx(s,{className:"h-4 w-4 print:h-3 print:w-3"}),e.jsx("span",{children:a})]}),la=({data:s,sectionId:a,isEditable:t,onEdit:n})=>{const{formatGenderAge:r,formatCustomFields:l,hasValue:i}=me(a);return e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[t&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:n,children:e.jsx(q,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"flex justify-evenly gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center text-center gap-2",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-6 print:mb-4 text-center",children:s.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm text-gray-600",children:[(s.gender||s.age)&&e.jsx(z,{icon:se,children:r(s.gender,s.age)}),i(s.phone)&&e.jsx(z,{icon:ae,children:s.phone}),i(s.email)&&e.jsx(z,{icon:te,children:s.email})]}),s.customFields&&s.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-sm text-gray-600 mt-2 white-nowrap",children:l(s.customFields)})]}),s.avatar&&e.jsx("div",{className:"shrink-0",children:e.jsx(ue,{src:s.avatar,alt:s.name||"头像",size:"lg"})})]})})]})},ia=({data:s,sectionId:a,isEditable:t,onEdit:n})=>{const{formatGenderAge:r,formatCustomFields:l,hasValue:i}=me(a);return e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[t&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:n,children:e.jsx(q,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-start gap-6",children:[s.avatar&&e.jsx("div",{className:"shrink-0",children:e.jsx(ue,{src:s.avatar,alt:s.name||"头像",size:"lg"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 print:mb-2",children:s.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600 print:gap-x-4",children:[(s.gender||s.age)&&e.jsx(z,{icon:se,children:r(s.gender,s.age)}),i(s.phone)&&e.jsx(z,{icon:ae,children:s.phone}),i(s.email)&&e.jsx(z,{icon:te,children:s.email})]}),s.customFields&&s.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600 mt-2 print:mt-1",children:l(s.customFields)})]})]})]})},oa=({data:s,sectionId:a,isEditable:t,onEdit:n})=>{const{formatGenderAge:r,formatCustomFields:l,hasValue:i}=me(a);return e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[t&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:n,children:e.jsx(q,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"flex items-start gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3 print:mb-2",children:s.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-6 gap-y-2 text-sm text-gray-600 print:gap-x-4",children:[(s.gender||s.age)&&e.jsx(z,{icon:se,children:r(s.gender,s.age)}),i(s.phone)&&e.jsx(z,{icon:ae,children:s.phone}),i(s.email)&&e.jsx(z,{icon:te,children:s.email})]}),s.customFields&&s.customFields.length>0&&e.jsx("div",{className:"flex flex-wrap gap-x-6 gap-y-2 text-sm text-gray-600 mt-2 print:mt-1",children:l(s.customFields)})]}),s.avatar&&e.jsx("div",{className:"shrink-0",children:e.jsx(ue,{src:s.avatar,alt:s.name||"头像",size:"lg"})})]})]})},ca=({data:s,sectionId:a,isEditable:t,onEdit:n})=>{const{formatGenderAge:r,formatCustomFields:l,hasValue:i}=me(a);return e.jsxs("div",{className:"relative group px-8 pt-8 pb-6 print:px-6 print:pt-6 print:pb-4",children:[t&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-20",onClick:n,children:e.jsx(q,{className:"h-4 w-4 text-gray-600"})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[s.avatar&&e.jsx("div",{className:"shrink-0",children:e.jsx(ue,{src:s.avatar,alt:s.name||"头像",size:"sm"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:s.name||"姓名"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-x-4 gap-y-1 text-sm text-gray-600",children:[(s.gender||s.age)&&e.jsx(z,{icon:se,children:r(s.gender,s.age)}),i(s.phone)&&e.jsx(z,{icon:ae,children:s.phone}),i(s.email)&&e.jsx(z,{icon:te,children:s.email}),s.customFields&&s.customFields.length>0&&l(s.customFields)]})]})]})})]})},da=({section:s,isEditable:a})=>{const t=s.data,n=ve(),r=()=>{n(`/editor/basic-info/${s.id}`)},l=t.layout||"center",o={center:la,left:ia,right:oa,classic:ca}[l];return e.jsx(o,{data:t,sectionId:s.id,isEditable:a,onEdit:r})},ma=[{value:"zh-full",label:"xxxx年xx月xx日 (2024年01月15日)",hasDay:!0},{value:"zh-month",label:"xxxx年xx月 (2024年01月)",hasDay:!1},{value:"dash-full",label:"xxxx-xx-xx (2024-01-15)",hasDay:!0},{value:"dash-month",label:"xxxx-xx (2024-01)",hasDay:!1},{value:"dot-full",label:"xxxx.xx.xx (2024.01.15)",hasDay:!0},{value:"dot-month",label:"xxxx.xx (2024.01)",hasDay:!1}],ua=s=>{if(!s)return{year:"",month:"",day:""};const a=s.split("-");return{year:a[0]||"",month:a[1]||"",day:a[2]||"01"}},nn=(s,a,t,n)=>{if(!s||!a)return"";const r=a.padStart(2,"0"),l=t.padStart(2,"0");return n&&t?`${s}-${r}-${l}`:`${s}-${r}`},Ee=(s,a)=>{if(!s)return"";const t=ua(s);if(!t.year||!t.month)return"";const n=ma.find(o=>o.value===a),r=t.year,l=t.month.padStart(2,"0"),i=t.day.padStart(2,"0");switch(a){case"zh-full":return`${r}年${l}月${i}日`;case"zh-month":return`${r}年${l}月`;case"dash-full":return`${r}-${l}-${i}`;case"dash-month":return`${r}-${l}`;case"dot-full":return`${r}.${l}.${i}`;case"dot-month":return`${r}.${l}`;default:return n?.hasDay?`${r}-${l}-${i}`:`${r}-${l}`}},rn=s=>{if(!s)return"";if(/^\d{4}-\d{2}(-\d{2})?$/.test(s))return s;try{if(/\d{4}年\d{2}月(\d{2}日)?/.test(s)){const t=s.match(/(\d{4})年(\d{2})月(\d{2})?日?/);if(t){const[,n,r,l]=t;return new Date(parseInt(n),parseInt(r)-1,parseInt(l)||1).toISOString().slice(0,10)}}if(/\d{4}\.\d{2}(\.\d{2})?/.test(s)){const t=s.match(/(\d{4})\.(\d{2})(?:\.(\d{2}))?/);if(t){const[,n,r,l]=t;return new Date(parseInt(n),parseInt(r)-1,parseInt(l)||1).toISOString().slice(0,10)}}const a=new Date(s);return isNaN(a.getTime())?s:a.toISOString().slice(0,10)}catch{return s}},ln=s=>s.length<=4&&/^\d*$/.test(s),on=s=>s.length<=2&&/^\d*$/.test(s)&&(s===""||parseInt(s)>=1&&parseInt(s)<=12),cn=s=>s.length<=2&&/^\d*$/.test(s)&&(s===""||parseInt(s)>=1&&parseInt(s)<=31),xa=({data:s})=>e.jsx("div",{className:"space-y-1 print:space-y-1",children:s.map((a,t)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("span",{className:"text-sm font-medium mt-0.5 shrink-0",children:[t+1,"."]}),e.jsx("span",{className:"text-sm text-gray-700 leading-relaxed [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:a.content}})]},a.id))}),ha=({data:s,dateFormat:a})=>e.jsx("div",{className:"space-y-4 print:space-y-3",children:s.map(t=>e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2 print:mb-1",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-1 print:mb-0.5",children:[e.jsx("h3",{className:"text-base font-semibold text-gray-900 print:text-sm",children:t.title}),e.jsx("span",{className:"text-sm text-gray-600",children:t.subtitle})]}),t.secondarySubtitle&&e.jsx("div",{className:"text-sm text-gray-700 font-medium",children:t.secondarySubtitle})]}),(t.startDate||t.endDate)&&e.jsxs("div",{className:"text-sm text-gray-600 ml-4 shrink-0",children:[Ee(t.startDate||"",a||"dash-month")," ",t.startDate&&t.endDate&&"-"," ",Ee(t.endDate||"",a||"dash-month")]})]}),t.description&&e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line pl-0 mt-2 print:mt-1 [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:t.description}})]},t.id))}),pa=({data:s})=>e.jsx("div",{className:"text-sm text-gray-700 leading-relaxed whitespace-pre-line [&_ul]:list-disc [&_ul]:pl-4 [&_ol]:list-decimal [&_ol]:pl-4 [&_li]:mb-1",dangerouslySetInnerHTML:{__html:s.content}}),ga=s=>{const[a,t]=p.useState(!1),{handleTimelineSave:n,handleListSave:r,handleTextSave:l}=qe(s.id),i=()=>s.editorType||"timeline",o=()=>{t(!0)},h=()=>{t(!1)},c=(g,j)=>{const x=i();x==="timeline"?n(g,j):x==="list"?r(g,j):l(g,j)},d=()=>{const g=i(),j={isOpen:a,onClose:h,onSave:c,title:s.title,currentIcon:s.iconName||"briefcase"};return g==="timeline"?{...j,initialData:s.data}:g==="list"?{...j,initialData:s.data}:{...j,initialData:s.data}};return{isEditing:a,editorType:i(),startEditing:o,closeEditing:h,handleSave:c,getEditorProps:d}},fa=({section:s,isEditable:a})=>{const{editorType:t}=ga(s),n=ve(),r=()=>{n(`/editor/${t}/${s.id}`)},l=()=>t==="list"?e.jsx(xa,{data:s.data}):t==="text"?e.jsx(pa,{data:s.data}):e.jsx(ha,{data:s.data,dateFormat:s.dateFormat});return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"relative group",children:[a&&e.jsx(f,{variant:"ghost",size:"icon",className:"absolute top-[.5rem] right-4 opacity-0 group-hover:opacity-100 transition-opacity duration-200 hover:bg-gray-100 h-8 w-8 print:hidden z-10",onClick:r,children:e.jsx(q,{className:"h-4 w-4 text-gray-600"})}),e.jsxs("div",{className:"mb-6 print:mb-6",children:[e.jsxs("div",{className:"flex items-center pb-[.5rem] border-b-gray-400 border-b-[1px]",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:s.title}),s.iconName&&e.jsx("div",{className:"p-2",children:e.jsx(de,{iconName:s.iconName,className:"h-4 w-4 print:h-3 print:w-3"})})]}),e.jsx("div",{className:"mt-[.5rem]",children:l()})]})]})})},Te=({resume:s,isEditable:a,scale:t,pageNumber:n=1})=>{const r=()=>s.sections.find(c=>c.type==="basic"),l=()=>s.sections.filter(c=>c.type==="timeline"||c.type==="list"||c.type==="text"),i=r(),o=l().filter(c=>c.visible).filter(c=>s.pageSettings?.enableMultiPage?(c.pageNumber||1)===n:!0).sort((c,d)=>c.order-d.order),h=n===1;return e.jsxs("div",{className:"max-w-[210mm] mx-auto bg-white print:shadow-none print:max-w-none",style:{transform:`scale(${t/100})`,transformOrigin:"top center",transition:"transform 0.2s ease-in-out"},children:[h&&i&&e.jsx(da,{section:i,isEditable:a}),o.length>0&&e.jsx("div",{className:`px-8 pb-8 print:px-6 print:pb-6 ${n!==1?"pt-8":""}`,children:e.jsx("div",{className:"space-y-6 print:space-y-4",children:o.map(c=>e.jsx(fa,{section:c,isEditable:a},c.id))})})]})},ba=({resume:s,isEditable:a=!1,scale:t=100,className:n=""})=>{if(!s.pageSettings?.enableMultiPage||s.pageSettings.totalPages<=1)return e.jsx("div",{className:`print-container ${n}`,children:e.jsx(Te,{resume:s,isEditable:a,scale:t})});const r=s.pageSettings.totalPages;return e.jsx("div",{className:`print-container ${n}`,children:e.jsx("div",{className:"space-y-12 print:space-y-0",children:Array.from({length:r},(l,i)=>{const o=i+1,h=o===r;return e.jsxs("div",{className:"relative",children:[o!=1&&e.jsx("div",{className:"absolute -top-12 left-0 right-0 flex justify-center print:hidden",children:e.jsxs("div",{className:"page-indicator text-gray-700 px-4 py-2 rounded-full text-sm font-medium shadow-sm",children:["第 ",o," 页 / 共 ",r," 页"]})}),e.jsx("div",{className:`
                  print-page page-container
                  ${h?"":"print:page-break-after-always"}
                  bg-white 
                  shadow-xl 
                  border border-gray-200
                  rounded-lg 
                  overflow-hidden
                  transition-all duration-300 ease-in-out
                  print:shadow-none 
                  print:border-none 
                  print:rounded-none
                `,children:e.jsx(Te,{resume:s,isEditable:a,scale:t,pageNumber:o})}),!h&&e.jsxs("div",{className:"flex items-center justify-center py-6 print:hidden",children:[e.jsx("div",{className:"flex-1 border-t border-dashed border-gray-300"}),e.jsx("div",{className:"px-4 text-gray-400 text-sm",children:"页面分隔"}),e.jsx("div",{className:"flex-1 border-t border-dashed border-gray-300"})]})]},o)})})})},ja=({isCollapsed:s,onToggleCollapse:a})=>{const{resumeList:t,currentResumeId:n,switchResume:r,createResume:l}=ce(),[i,o]=p.useState(""),h=p.useMemo(()=>{const x=new $e({fields:["title","description"],storeFields:["id","title","description"],searchOptions:{boost:{title:2},fuzzy:.2,prefix:!0}}),v=t.map(m=>({id:m.id,title:m.title,description:m.description||""}));return x.addAll(v),x},[t]),c=p.useMemo(()=>{if(!i.trim())return t;try{return h.search(i).map(m=>t.find(S=>S.id===m.id)).filter(m=>m!==void 0)}catch(x){return console.error("Search error:",x),t}},[i,t,h]),d=x=>{x!==n&&r(x)},g=()=>{l(`新简历 ${t.length+1}`,"简历描述")},j=()=>{o("")};return s?e.jsxs("div",{className:"w-12 bg-white border-r border-gray-200 flex flex-col items-center py-4",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2 mb-4",children:e.jsx(gt,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[t.slice(0,3).map(x=>e.jsx(f,{variant:x.id===n?"default":"ghost",size:"sm",onClick:()=>d(x.id),className:"p-2 w-8 h-8",title:x.title,children:e.jsx(_,{className:"h-4 w-4"})},x.id)),t.length>3&&e.jsxs("div",{className:"text-xs text-gray-400 text-center",children:["+",t.length-3]})]})]}):e.jsxs("div",{className:"w-80 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"简历列表"}),e.jsx(f,{variant:"ghost",size:"sm",onClick:a,className:"p-2",children:e.jsx(ft,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"relative",children:[e.jsx(He,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx($,{placeholder:"搜索简历标题或内容...",value:i,onChange:x=>o(x.target.value),className:"pl-10 pr-10"}),i&&e.jsx(f,{variant:"ghost",size:"sm",onClick:j,className:"absolute right-1 top-1/2 transform -translate-y-1/2 p-1 h-6 w-6",children:e.jsx(G,{className:"h-3 w-3"})})]}),e.jsxs(f,{onClick:g,className:"w-full mt-3 flex items-center space-x-2",size:"sm",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:"新建简历"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"p-2",children:c.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:i?"未找到匹配的简历":"暂无简历"}):c.map(x=>e.jsxs("button",{className:`
                  w-full p-3 text-left rounded-lg transition-colors mb-2
                  hover:bg-gray-50 flex items-start space-x-3
                  ${x.id===n?"bg-blue-50 border border-blue-200 text-blue-700":"border border-transparent text-gray-700 hover:border-gray-200"}
                `,onClick:()=>d(x.id),children:[e.jsx(_,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"font-medium truncate mb-1",children:[x.title,x.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 px-2 py-0.5 rounded-full",children:"当前"})]}),x.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate",children:x.description}),e.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["创建时间: ",new Date(x.createdAt).toLocaleDateString()]})]})]},x.id))})}),e.jsxs("div",{className:"p-3 border-t border-gray-200 text-xs text-gray-500",children:["共 ",t.length," 份简历",i&&c.length!==t.length&&e.jsxs("span",{className:"ml-2",children:["(",c.length," 匹配)"]})]})]})},ee=ys,va=js,We=p.forwardRef(({className:s,...a},t)=>e.jsx(_e,{ref:t,className:M("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a}));We.displayName=_e.displayName;const W=p.forwardRef(({className:s,children:a,...t},n)=>e.jsxs(va,{children:[e.jsx(We,{}),e.jsxs(Be,{ref:n,className:M("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t,children:[a,e.jsxs(vs,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity outline-none hover:opacity-100 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(G,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));W.displayName=Be.displayName;const J=({className:s,...a})=>e.jsx("div",{className:M("flex flex-col space-y-1.5 text-center sm:text-left",s),...a});J.displayName="DialogHeader";const Je=({className:s,...a})=>e.jsx("div",{className:M("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...a});Je.displayName="DialogFooter";const Q=p.forwardRef(({className:s,...a},t)=>e.jsx(Ue,{ref:t,className:M("text-lg font-semibold leading-none tracking-tight",s),...a}));Q.displayName=Ue.displayName;const Y=p.forwardRef(({className:s,...a},t)=>e.jsx(Ve,{ref:t,className:M("text-sm text-muted-foreground",s),...a}));Y.displayName=Ve.displayName;const ya=({isOpen:s,onClose:a,onConfirm:t})=>e.jsx(ee,{open:s,onOpenChange:a,children:e.jsxs(W,{className:"max-w-md",children:[e.jsxs(J,{children:[e.jsxs(Q,{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-5 w-5 text-red-600"}),e.jsx("span",{children:"确认重置简历"})]}),e.jsx(Y,{children:"此操作将会导致当前简历内容的永久性丢失，请谨慎操作。"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx("p",{className:"text-gray-700 mb-4",children:"确定要重置整份简历吗？此操作将丢失当前所有已修改的数据，并恢复初始状态！"}),e.jsx("p",{className:"text-red-600 text-sm mt-4 font-medium",children:"⚠️ 此操作无法撤销，请谨慎操作！"})]}),e.jsxs(Je,{className:"flex space-x-2",children:[e.jsx(f,{variant:"outline",onClick:a,className:"min-w-[80px]",children:"取消"}),e.jsx(f,{onClick:t,className:"min-w-[80px] bg-red-600 hover:bg-red-700",children:"确认重置"})]})]})}),Qe=[{id:"deepseek",name:"DeepSeek Chat",url:"https://chat.deepseek.com/",icon:""},{id:"qwen",name:"Qwen Chat",url:"https://chat.qwen.ai/",icon:""},{id:"doubao",name:"豆包",url:"https://www.doubao.com/chat/",icon:""}],L=Ge("ai-platforms",Qe),Na=b(null,(s,a,t)=>{const n=s(L),r={...t,id:Date.now().toString()};a(L,[...n,r])}),wa=b(null,(s,a,t)=>{const r=s(L).map(l=>l.id===t.id?t:l);a(L,r)}),Sa=b(null,(s,a,t)=>{const r=s(L).filter(l=>l.id!==t);a(L,r)}),Ca=b(null,(s,a)=>{a(L,Qe)}),Ra=({onManagePlatforms:s})=>{const[a,t]=p.useState(!1),n=P(L),r=o=>{window.open(o,"_blank","noopener,noreferrer"),t(!1)},l=()=>{s(),t(!1)},i=()=>{const o=`${window.location.origin}${window.location.pathname}#/prompts`;window.open(o,"_blank","noopener,noreferrer"),t(!1)};return e.jsxs("div",{className:"relative",children:[e.jsxs(f,{variant:"ghost",size:"sm",onClick:()=>t(!a),className:"text-gray-500 hover:text-gray-700 hover:bg-gray-100 text-xs px-2 py-1 h-auto",children:[e.jsx("span",{children:"常用工具平台"}),e.jsx(bt,{className:"h-3 w-3 ml-1"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>t(!1)}),e.jsx("div",{className:"absolute top-full right-0 mt-1 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-20",children:e.jsxs("div",{className:"py-1",children:[n.map(o=>e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-gray-700",onClick:()=>r(o.url),children:[e.jsx(de,{iconName:o.icon||"",className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"flex-1",children:o.name}),e.jsx(jt,{className:"h-3 w-3 text-gray-400"})]},o.id)),n.length===0&&e.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"暂无AI平台"}),n.length>0&&e.jsx("div",{className:"border-t border-gray-200 my-1"}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-blue-600",onClick:l,children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{children:"管理工具平台"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2 text-green-600",onClick:i,children:[e.jsx(vt,{className:"h-4 w-4"}),e.jsx("span",{children:"管理简历优化提示词"})]})]})})]})]})},Ye=p.forwardRef(({className:s,onCheckedChange:a,checkStatus:t,...n},r)=>{const l=i=>{a?.(i.target.checked)};return e.jsxs("label",{className:"inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only",ref:r,onChange:l,...n}),e.jsx("div",{className:M("relative inline-flex h-6 w-11 items-center rounded-full duration-300 transition-colors outline-none",`bg-gray-200 ${t?"bg-blue-600":""}`,"disabled:cursor-not-allowed disabled:opacity-50",s),children:e.jsx("span",{className:M("inline-block h-4 w-4 transform rounded-full bg-white duration-300 transition-transform",`translate-x-1 ${t?"translate-x-6":""}`)})})]})});Ye.displayName="Switch";const I=b({isVisible:!1,message:"",variant:"default",position:"top-center"});b({autoClose:!0,autoCloseDelay:3e3,defaultVisible:!1});const ka=b(s=>s(I).isVisible,(s,a,t)=>{a(I,{...s(I),isVisible:t})}),Da=b(s=>s(I).message,(s,a,t)=>{a(I,{...s(I),message:t})}),Aa=b(s=>s(I).variant,(s,a,t)=>{a(I,{...s(I),variant:t})}),Ia=b(s=>s(I).position,(s,a,t)=>{a(I,{...s(I),position:t})}),ne=b(null,(s,a,t,n="default",r="top-center")=>{a(I,{...s(I),message:t,variant:n,position:r,isVisible:!0}),console.log("showMessage",t,n,r,s(I).isVisible)}),Pa=b(null,(s,a)=>{a(I,{...s(I),isVisible:!1})}),za=b(null,(s,a,t,n)=>{a(ne,t,"info",n)}),Ma=b(null,(s,a,t,n)=>{a(ne,t,"success",n)}),Oa=b(null,(s,a,t,n)=>{a(ne,t,"warning",n)}),Ea=b(null,(s,a,t,n)=>{a(ne,t,"error",n)}),Ne=(s={})=>{const{autoClose:a=!0,autoCloseDelay:t=3e3,defaultVisible:n=!1}=s,[r,l]=Ns(ka),i=P(Da),o=P(Aa),h=P(Ia),c=C(ne),d=C(Pa),g=C(za),j=C(Ma),x=C(Oa),v=C(Ea);return n&&!r&&l(!0),{isVisible:r,message:i,variant:o,position:h,showMessage:c,hideMessage:d,showInfo:g,showSuccess:j,showWarning:x,showError:v,autoClose:a,autoCloseDelay:t}},Ta=({isOpen:s,onClose:a})=>{const t=P(L),n=C(Na),r=C(wa),l=C(Sa),i=C(Ca),{showSuccess:o,showError:h}=Ne(),[c,d]=p.useState(null),[g,j]=p.useState(!1),[x,v]=p.useState(!0),m=()=>{d({name:"",url:"",icon:""}),j(!0)},S=w=>{d({id:w.id,name:w.name,url:w.url,icon:w.icon||""}),j(!1)},D=()=>{if(c){if(!c.name.trim()){h("请输入平台名称");return}if(!c.url.trim()){h("请输入平台URL");return}try{new URL(c.url)}catch{h("请输入有效的URL地址");return}g?(n({name:c.name.trim(),url:c.url.trim(),icon:x?c.icon:""}),o("AI平台添加成功")):c.id&&(r({id:c.id,name:c.name.trim(),url:c.url.trim(),icon:c.icon}),o("AI平台更新成功")),d(null),j(!1)}},O=w=>{l(w),o("AI平台删除成功")},E=()=>{i(),o("已重置为默认AI平台")},B=()=>{d(null),j(!1)};return e.jsx(ee,{open:s,onOpenChange:a,children:e.jsxs(W,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(J,{children:[e.jsx(Q,{children:"管理工具平台"}),e.jsx(Y,{children:"添加、编辑或删除常用的AI/工具平台。点击平台可以在新标签页中打开。"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[t.map(w=>e.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 rounded-lg hover:bg-gray-50",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(de,{iconName:w.icon||"",className:"h-5 w-5 text-gray-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:w.name}),e.jsx("div",{className:"text-sm text-gray-500",children:w.url})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>S(w),children:e.jsx(q,{className:"h-4 w-4"})}),e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>O(w.id),className:"text-red-600 hover:text-red-700",children:e.jsx(H,{className:"h-4 w-4"})})]})]},w.id)),t.length===0&&e.jsx("div",{className:"text-center py-8 text-gray-500",children:"暂无AI平台，点击下方按钮添加"})]}),c&&e.jsxs("div",{className:"p-4 border border-blue-200 rounded-lg bg-blue-50",children:[e.jsx("h4",{className:"font-medium mb-3",children:g?"添加新平台":"编辑平台"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"platform-name",children:"平台名称"}),e.jsx($,{id:"platform-name",value:c.name,onChange:w=>d({...c,name:w.target.value}),placeholder:"例如：ChatGPT"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"platform-url",children:"平台URL"}),e.jsx($,{id:"platform-url",value:c.url,onChange:w=>d({...c,url:w.target.value}),placeholder:"例如：https://chat.openai.com"})]}),g&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{checked:x,checkStatus:x,onCheckedChange:v,id:"icons-enabled"}),e.jsx(F,{htmlFor:"icons-enabled",className:"text-sm text-gray-600",children:"使用图标"})]}),e.jsx("div",{className:`transition-all duration-300 ease-in-out ${x?"opacity-100 max-h-96 overflow-visible":"opacity-0 max-h-0 overflow-hidden"}`,children:e.jsx(Oe,{value:c.icon,onChange:w=>d({...c,icon:w}),label:"图标"})})]}),!g&&e.jsx("div",{children:e.jsx(Oe,{value:c.icon,onChange:w=>d({...c,icon:w}),label:"图标"})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(f,{onClick:D,size:"sm",children:"保存"}),e.jsx(f,{variant:"outline",onClick:B,size:"sm",children:"取消"})]})]})]}),!c&&e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(f,{variant:"outline",onClick:m,className:"flex items-center space-x-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:"添加平台"})]}),e.jsxs(f,{variant:"ghost",onClick:E,className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(yt,{className:"h-4 w-4"}),e.jsx("span",{children:"重置为默认"})]})]})]})]})})},$a=({onPreview:s,onClear:a,onManageResumes:t})=>{const[n,r]=p.useState(!1),l=ve(),i=()=>{l("/sections")};return e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:t,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-green-600 hover:text-green-700 hover:bg-green-50",children:[e.jsx(Nt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"简历管理"})]}),e.jsxs(f,{onClick:i,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-blue-600 hover:text-blue-700 hover:bg-blue-50",children:[e.jsx(je,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"模块管理"})]}),e.jsxs(f,{onClick:s,variant:"outline",size:"sm",className:"flex items-center space-x-2",children:[e.jsx(wt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"预览 & 导出"})]}),e.jsxs(f,{onClick:a,variant:"outline",size:"sm",className:"flex items-center space-x-2 text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"重置"})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(Ra,{onManagePlatforms:()=>r(!0)})}),e.jsx(Ta,{isOpen:n,onClose:()=>r(!1)})]})},Fa=()=>e.jsx("footer",{className:"mt-12 py-6 text-center text-gray-500 text-xs",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[e.jsx("p",{children:"✨ 让每一份简历都闪闪发光 ✨"}),e.jsx("p",{className:"mt-1 text-gray-400",children:"数据自动保存到本地浏览器，刷新页面不会丢失"})]})}),La=({isOpen:s,onClose:a,onConfirm:t,resumeTitle:n,isLastResume:r=!1})=>{const l=()=>{t(),a()};return e.jsx(ee,{open:s,onOpenChange:a,children:e.jsxs(W,{className:"max-w-md",children:[e.jsx(J,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-red-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"h-5 w-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx(Q,{className:"text-lg font-semibold text-gray-900",children:"删除简历"}),e.jsx(Y,{className:"text-sm text-gray-600",children:"此操作不可恢复"})]})]})}),e.jsx("div",{className:"py-4",children:r?e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(De,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-yellow-800",children:"无法删除最后一份简历"}),e.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"系统需要至少保留一份简历。请先创建新简历后再删除此简历。"})]})]})}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["确定要删除简历 ",e.jsxs("span",{className:"font-medium text-gray-900",children:['"',n,'"']})," 吗？"]}),e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"警告"}),e.jsx("p",{className:"text-xs text-red-700 mt-1",children:"删除后，该简历的所有数据将永久丢失，无法恢复。"})]})]})})]})}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(f,{variant:"outline",onClick:a,disabled:r,children:"取消"}),!r&&e.jsxs(f,{variant:"destructive",onClick:l,className:"bg-red-600 hover:bg-red-700",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"确认删除"]})]})]})})},_a=({isOpen:s,onClose:a})=>{const{resumeList:t,currentResumeId:n,totalCount:r,switchResume:l,createResume:i,deleteResume:o,batchDeleteResumes:h,renameResume:c,duplicateResume:d,exportResume:g,exportAllResumes:j,importSingleResume:x,importBatchResumes:v}=ce(),{showMessage:m}=Ne(),[S,D]=p.useState(null),[O,E]=p.useState(!1),[B,w]=p.useState(""),[re,K]=p.useState(""),[Z,T]=p.useState(null),[U,N]=p.useState(!1),[y,V]=p.useState(new Set),[xe,he]=p.useState({isOpen:!1,resumeId:"",resumeTitle:""}),[we,pe]=p.useState({isOpen:!1,selectedCount:0}),Ze=()=>{if(!B.trim()){m("请输入简历标题","warning");return}i(B.trim(),re.trim()||void 0)?(m("简历创建成功","success"),E(!1),w(""),K("")):m("创建失败，请重试","error")},Xe=u=>{D({id:u.id,title:u.title,description:u.description||""}),T(null)},es=()=>{if(!S||!S.title.trim()){m("请输入简历标题","warning");return}c(S.id,S.title.trim(),S.description.trim()||void 0)?(m("保存成功","success"),D(null)):m("保存失败，请重试","error")},ss=()=>{D(null)},ts=(u,A)=>{he({isOpen:!0,resumeId:u,resumeTitle:A}),T(null)},as=()=>{const{resumeId:u}=xe;o(u)?m("简历删除成功","success"):m("删除失败，请重试","error"),he({isOpen:!1,resumeId:"",resumeTitle:""})},ns=()=>{he({isOpen:!1,resumeId:"",resumeTitle:""})},rs=(u,A)=>{d(u,`${A} - 副本`)?m("简历复制成功","success"):m("复制失败，请重试","error"),T(null)},ls=u=>{u!==n&&(l(u),m("已切换简历","success"))},is=(u,A)=>{g(u)?m(`简历"${A}"导出成功`,"success"):m("导出失败，请重试","error"),T(null)},os=()=>{j()?m("所有简历导出成功","success"):m("导出失败，请重试","error")},cs=async()=>{await x(m)&&m("简历导入成功","success")},ds=async()=>{const u=await v(m);u.length>0&&m(`成功导入 ${u.length} 份简历`,"success")},ms=()=>{N(!0),V(new Set),T(null)},Se=()=>{N(!1),V(new Set)},Ce=u=>{const A=new Set(y);A.has(u)?A.delete(u):A.add(u),V(A)},us=()=>{y.size===t.length?V(new Set):V(new Set(t.map(u=>u.id)))},xs=()=>{if(y.size===0){m("请选择要删除的简历","warning");return}if(y.size>=t.length){m("不能删除所有简历，至少要保留一份","warning");return}pe({isOpen:!0,selectedCount:y.size})},hs=()=>{h(Array.from(y))?(m(`成功删除 ${y.size} 份简历`,"success"),Se()):m("删除失败，请重试","error"),pe({isOpen:!1,selectedCount:0})},Re=()=>{pe({isOpen:!1,selectedCount:0})},ke=u=>new Date(u).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"});return e.jsxs(e.Fragment,{children:[e.jsx(ee,{open:s,onOpenChange:a,children:e.jsxs(W,{className:"max-w-4xl max-h-[85vh] flex flex-col",children:[e.jsxs(J,{children:[e.jsx(Q,{className:"text-xl font-semibold text-gray-800",children:"简历管理"}),e.jsx(Y,{children:"管理您的所有简历，支持创建、编辑、导入导出等操作"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 py-4 border-b border-gray-200",children:U?e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:Se,variant:"outline",size:"sm",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"退出批量模式"]}),e.jsxs(f,{onClick:us,variant:"outline",size:"sm",children:[e.jsx(Pe,{className:"h-4 w-4 mr-1"}),y.size===t.length?"取消全选":"全选"]}),e.jsxs(f,{onClick:xs,variant:"outline",size:"sm",disabled:y.size===0,className:"text-red-600 border-red-300 hover:bg-red-50 disabled:opacity-50",children:[e.jsx(H,{className:"h-4 w-4 mr-1"}),"删除选中 (",y.size,")"]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-500 flex items-center",children:["已选择 ",y.size," / ",r," 份简历"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs(f,{onClick:()=>E(!0),size:"sm",className:"bg-blue-600 hover:bg-blue-700",children:[e.jsx(ie,{className:"h-4 w-4 mr-1"}),"新建简历"]}),e.jsxs(f,{onClick:cs,variant:"outline",size:"sm",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"导入简历"]}),e.jsxs(f,{onClick:ds,variant:"outline",size:"sm",children:[e.jsx(Ae,{className:"h-4 w-4 mr-1"}),"批量导入"]}),e.jsxs(f,{onClick:os,variant:"outline",size:"sm",children:[e.jsx(Ie,{className:"h-4 w-4 mr-1"}),"导出全部"]}),r>1&&e.jsxs(f,{onClick:ms,variant:"outline",size:"sm",className:"text-orange-600 border-orange-300 hover:bg-orange-50",children:[e.jsx(G,{className:"h-4 w-4 mr-1"}),"批量操作"]}),e.jsxs("div",{className:"ml-auto text-sm text-gray-500 flex items-center",children:["共 ",r," 份简历"]})]})}),O&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg space-y-3",children:[e.jsx("h3",{className:"font-medium text-blue-800",children:"创建新简历"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"new-title",children:"简历标题 *"}),e.jsx($,{id:"new-title",value:B,onChange:u=>w(u.target.value),placeholder:"请输入简历标题",className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"new-description",children:"描述"}),e.jsx($,{id:"new-description",value:re,onChange:u=>K(u.target.value),placeholder:"简历描述（可选）",className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>{E(!1),w(""),K("")},children:"取消"}),e.jsx(f,{size:"sm",onClick:Ze,children:"创建"})]})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"space-y-2 p-1",children:t.map(u=>e.jsx("div",{className:`
                  p-4 border rounded-lg transition-all duration-200 hover:shadow-md
                  ${u.id===n?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:bg-gray-50"}
                  ${U&&y.has(u.id)?"border-orange-500 bg-orange-50":""}
                `,children:S?.id===u.id?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx(F,{htmlFor:"edit-title",children:"简历标题 *"}),e.jsx($,{id:"edit-title",value:S.title,onChange:A=>D({...S,title:A.target.value}),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(F,{htmlFor:"edit-description",children:"描述"}),e.jsx($,{id:"edit-description",value:S.description,onChange:A=>D({...S,description:A.target.value}),className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:ss,children:"取消"}),e.jsx(f,{size:"sm",onClick:es,children:"保存"})]})]}):e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>{U?Ce(u.id):ls(u.id)},children:e.jsxs("div",{className:"flex items-center space-x-3",children:[U?e.jsx("div",{className:`
                              w-5 h-5 rounded border-2 flex items-center justify-center cursor-pointer
                              ${y.has(u.id)?"bg-orange-500 border-orange-500 text-white":"border-gray-300 hover:border-orange-400"}
                            `,onClick:A=>{A.stopPropagation(),Ce(u.id)},children:y.has(u.id)&&e.jsx(Pe,{className:"h-3 w-3"})}):e.jsx(_,{className:`h-5 w-5 ${u.id===n?"text-blue-600":"text-gray-400"}`}),e.jsxs("div",{children:[e.jsxs("h3",{className:`font-medium ${u.id===n?"text-blue-800":"text-gray-800"}`,children:[u.title,u.id===n&&e.jsx("span",{className:"ml-2 text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:"当前"})]}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("span",{children:["创建于 ",ke(u.createdAt)]}),e.jsxs("span",{children:["更新于 ",ke(u.updatedAt)]}),u.description&&e.jsx("span",{className:"max-w-xs truncate",children:u.description})]})]})]})}),!U&&e.jsxs("div",{className:"relative",children:[e.jsx(f,{variant:"ghost",size:"sm",onClick:()=>T(Z===u.id?null:u.id),children:e.jsx(St,{className:"h-4 w-4"})}),Z===u.id&&e.jsx("div",{className:"absolute right-0 top-8 w-40 bg-white border border-gray-200 rounded-lg shadow-lg z-10",children:e.jsxs("div",{className:"py-1",children:[e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>Xe(u),children:[e.jsx(q,{className:"h-4 w-4"}),e.jsx("span",{children:"编辑"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>rs(u.id,u.title),children:[e.jsx(Ct,{className:"h-4 w-4"}),e.jsx("span",{children:"复制"})]}),e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 flex items-center space-x-2",onClick:()=>is(u.id,u.title),children:[e.jsx(Ie,{className:"h-4 w-4"}),e.jsx("span",{children:"导出"})]}),r>1&&e.jsxs("button",{className:"w-full px-3 py-2 text-left text-sm hover:bg-gray-100 text-red-600 flex items-center space-x-2",onClick:()=>ts(u.id,u.title),children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"删除"})]})]})})]})]})},u.id))})})]})}),Z&&e.jsx("div",{className:"fixed inset-0 z-0",onClick:()=>T(null)}),e.jsx(La,{isOpen:xe.isOpen,onClose:ns,onConfirm:as,resumeTitle:xe.resumeTitle,isLastResume:r<=1}),e.jsx(ee,{open:we.isOpen,onOpenChange:Re,children:e.jsxs(W,{className:"max-w-md",children:[e.jsxs(J,{children:[e.jsx(Q,{className:"text-lg font-semibold text-red-600",children:"确认批量删除"}),e.jsxs(Y,{children:["您确定要删除选中的 ",we.selectedCount," 份简历吗？此操作不可撤销。"]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(f,{variant:"outline",onClick:Re,children:"取消"}),e.jsx(f,{onClick:hs,className:"bg-red-600 hover:bg-red-700",children:"确认删除"})]})]})})]})},Ba=be("fixed z-[9999] max-w-sm rounded-lg border shadow-lg transition-all duration-300 ease-in-out print:hidden",{variants:{variant:{default:"bg-white border-gray-200 text-gray-900",info:"bg-blue-50 border-blue-200 text-blue-900",success:"bg-green-50 border-green-200 text-green-900",warning:"bg-yellow-50 border-yellow-200 text-yellow-900",error:"bg-red-50 border-red-200 text-red-900"},position:{"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4","top-center":"top-4 left-1/2 -translate-x-1/2","bottom-center":"bottom-4 left-1/2 -translate-x-1/2"},size:{sm:"p-3 text-sm",md:"p-4 text-base",lg:"p-5 text-lg"}},defaultVariants:{variant:"default",position:"top-right",size:"md"}}),Ke=p.forwardRef(({className:s,variant:a,position:t,size:n,message:r,isVisible:l,onClose:i,autoClose:o=!0,autoCloseDelay:h=3e3,showCloseButton:c=!0,icon:d,...g},j)=>{const[x,v]=p.useState(!1);p.useEffect(()=>{if(console.log("FloatingMessage useEffect:",{isVisible:l,autoClose:o,autoCloseDelay:h}),l){if(console.log("显示消息:",r),v(!0),o){const S=setTimeout(()=>{m(),console.log("关闭消息:",r)},h);return()=>clearTimeout(S)}}else v(!1)},[l,o,h,r]);const m=()=>{v(!1),setTimeout(()=>{i?.()},300)};return!l&&!x?null:e.jsx("div",{ref:j,className:M(Ba({variant:a,position:t,size:n}),l&&x?"opacity-100 translate-y-0 scale-100":"opacity-0 translate-y-2 scale-95",s),...g,children:e.jsxs("div",{className:"flex items-start gap-3",children:[d&&e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:d}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("p",{className:"font-medium leading-relaxed break-words",children:r})}),c&&i&&e.jsx("button",{onClick:m,className:"flex-shrink-0 p-1 rounded-md hover:bg-black/5 transition-colors duration-200","aria-label":"Close message",children:e.jsx(G,{className:"w-4 h-4"})})]})})});Ke.displayName="FloatingMessage";const Ua=()=>{const s=P(R),a=C(Qt),[t,n]=p.useState(!1),[r,l]=p.useState(!1),[i,o]=p.useState(!1),{isVisible:h,message:c,variant:d,position:g,hideMessage:j,autoClose:x,autoCloseDelay:v}=Ne();p.useEffect(()=>{console.log("FloatingMessage:",{isVisible:h,message:c,variant:d,position:g})},[h]);const m=()=>{const E=`${window.location.origin}${window.location.pathname}#/preview`;window.open(E,"_blank","noopener,noreferrer")},S=()=>{a(),n(!1)},D=()=>{l(!0)},O=()=>{o(!i)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50",children:[e.jsx(Wt,{children:e.jsx($a,{onPreview:m,onClear:()=>n(!0),onManageResumes:D})}),e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"hidden p-4 lg:block",children:e.jsx(ja,{isCollapsed:i,onToggleCollapse:O})}),e.jsx("main",{className:"flex-1 overflow-hidden",children:e.jsx("div",{className:"flex justify-center mx-auto p-4 pb-9",children:e.jsx(ba,{resume:s,isEditable:!0,className:"bg-gradient-to-br from-gray-50 to-blue-50 min-h-screen"})})})]}),e.jsx(ya,{isOpen:t,onClose:()=>n(!1),onConfirm:S}),e.jsx(_a,{isOpen:r,onClose:()=>l(!1)}),e.jsx(Fa,{})]}),e.jsx(Ke,{message:c,isVisible:h,variant:d,position:g,onClose:j,autoClose:x,autoCloseDelay:v})]})},Va=()=>e.jsx(Ua,{}),Ga=le.lazy(()=>oe(()=>import("./PreviewPage-BZWL5xac.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(s=>({default:s.PreviewPage}))),Ha=le.lazy(()=>oe(()=>import("./PromptManagePage-DlLEAzU1.js"),__vite__mapDeps([8,1,2,3,6,5,4,7])).then(s=>({default:s.PromptManagePage}))),qa=le.lazy(()=>oe(()=>import("./SectionManagerPage-4wMw1dlo.js"),__vite__mapDeps([9,1,2,3,10,6,11,5,7,4])).then(s=>({default:s.SectionManagerPage}))),Wa=le.lazy(()=>oe(()=>import("./EditorPage-CObGU7TM.js"),__vite__mapDeps([12,1,2,3,5,6,10,11,7,4])).then(s=>({default:s.EditorPage})));function Ja(){return e.jsx(ws,{children:e.jsx(Rt,{children:e.jsxs(kt,{children:[e.jsx(X,{path:"/",element:e.jsx(Va,{})}),e.jsx(X,{path:"/preview",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Ga,{})})}),e.jsx(X,{path:"/prompts",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Ha,{})})}),e.jsx(X,{path:"/sections",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(qa,{})})}),e.jsx(X,{path:"/editor/:type/:sectionId",element:e.jsx(p.Suspense,{fallback:null,children:e.jsx(Wa,{})})})]})})})}gs.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(Ja,{})}));export{Fa as A,f as B,ee as D,Ke as F,$ as I,F as L,ba as R,oe as _,W as a,J as b,M as c,Q as d,Y as e,na as f,ta as g,an as h,sn as i,tn as j,Oe as k,ue as l,qe as m,ma as n,rn as o,ua as p,nn as q,R as r,on as s,cn as t,Ne as u,ln as v,Ee as w};
